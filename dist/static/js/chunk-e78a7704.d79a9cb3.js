(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e78a7704"],{"09f4":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),Math.easeInOutQuad=function(t,e,n,r){return t/=r/2,t<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function a(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function i(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(t,e,n){var o=i(),s=t-o,u=20,c=0;e="undefined"===typeof e?500:e;var l=function t(){c+=u;var i=Math.easeInOutQuad(c,o,s,e);a(i),c<e?r(t):n&&"function"===typeof n&&n()};l()}},"2f21":function(t,e,n){"use strict";var r=n("79e5");t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},3206:function(t,e,n){},"393d":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dialog-container"},[n("el-row",[n("div",{staticClass:"inputBox fr"},[n("el-input",{attrs:{placeholder:"搜索任务名称",size:"small"},on:{blur:function(e){return t.getList()}},model:{value:t.listQuery.condition1,callback:function(e){t.$set(t.listQuery,"condition1",e)},expression:"listQuery.condition1"}},[n("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})])],1)]),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.data},on:{"sort-change":t.sortChange}},[n("el-table-column",{attrs:{prop:"name",label:t.child.firstColumnName,"min-width":"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"coin",label:"金币数",sortable:"custom","class-name":t.getSortClass("coin"),"min-width":"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"number",label:"领取量",sortable:"custom","class-name":t.getSortClass("number"),"min-width":"100"}}),t._v(" "),n("el-table-column",{attrs:{label:"任务时间","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.valid_from)+" - "+t._s(e.row.valid_to)+"\n      ")]}}])}),t._v(" "),"0"===t.child.type?n("el-table-column",{attrs:{prop:"id",width:"230",label:"选择","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id!==t.child.taskId?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return t.SingleOperation(e.row.id)}}},[t._v("选择")]):t._e(),t._v(" "),e.row.id===t.child.taskId?n("el-button",{staticStyle:{color:"#ccc"},attrs:{type:"text",size:"small"}},[t._v("已选择")]):t._e()]}}],null,!1,616375394)}):t._e(),t._v(" "),"1"===t.child.type?n("el-table-column",{attrs:{prop:"id",width:"230",label:"选择","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.game.id!==t.child.taskId?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return t.SingleOperation(e.row.game.id)}}},[t._v("选择")]):t._e(),t._v(" "),e.row.game.id===t.child.taskId?n("el-button",{staticStyle:{color:"#ccc"},attrs:{type:"text",size:"small"}},[t._v("已选择")]):t._e()]}}],null,!1,2893651586)}):t._e(),t._v(" "),"2"===t.child.type?n("el-table-column",{attrs:{prop:"id",width:"230",label:"选择","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.questionnaire.id!==t.child.taskId?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return t.SingleOperation(e.row.questionnaire.id)}}},[t._v("选择")]):t._e(),t._v(" "),e.row.questionnaire.id===t.child.taskId?n("el-button",{staticStyle:{color:"#ccc"},attrs:{type:"text",size:"small"}},[t._v("已选择")]):t._e()]}}],null,!1,1284381971)}):t._e(),t._v(" "),"3"===t.child.type?n("el-table-column",{attrs:{prop:"id",width:"230",label:"选择","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.article.id!==t.child.taskId?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return t.SingleOperation(e.row.article.id)}}},[t._v("选择")]):t._e(),t._v(" "),e.row.article.id===t.child.taskId?n("el-button",{staticStyle:{color:"#ccc"},attrs:{type:"text",size:"small"}},[t._v("已选择")]):t._e()]}}],null,!1,3673380872)}):t._e()],1),t._v(" "),t.total?n("div",{staticClass:"pagingBox"},[n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],staticStyle:{padding:"0"},attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getList}})],1):t._e()],1)},a=[],i=(n("55dd"),n("c5f6"),n("db72")),o=n("333d"),s=n("f8a4"),u={components:{Pagination:o["a"]},props:{child:{type:Object,required:!0}},data:function(){return{search:"",listQuery:{page:1,limit:20,condition1:void 0,title:void 0,type:void 0,sort:"+id"},data:[],total:100,currentId:""}},watch:{child:{handler:function(t,e){console.log(t,e),this.getList()},deep:!0}},created:function(){console.log(this.child),this.currentId=this.child.taskId,console.log(this.currentId),this.getList()},methods:{getList:function(t){var e=Object(i["a"])({page:this.listQuery.page,per_page:15,company_id:"",status:"success",type:"",name:this.listQuery.condition1},t);"0"===this.child.type?this.getProductList(e):"1"===this.child.type?this.getGameList(e):"2"===this.child.type?this.getInvestList(e):"3"===this.child.type&&this.getArticleList(e)},getProductList:function(t){var e=this;Object(s["x"])(t).then((function(t){console.log(t),e.data=t.data,e.total=Number(t.headers["x-total"])}))},getGameList:function(t){var e=this;Object(s["n"])(t).then((function(t){console.log(t),e.data=t.data,e.total=Number(t.headers["x-total"])}))},getInvestList:function(t){var e=this;Object(s["p"])(t).then((function(t){console.log(t),e.data=t.data,e.total=Number(t.headers["x-total"])}))},getArticleList:function(t){var e=this;Object(s["l"])(t).then((function(t){console.log(t),e.data=t.data,e.total=Number(t.headers["x-total"])}))},SingleOperation:function(t){this.currentId=t,this.$emit("updataId",t)},handleCurrentChange:function(t){console.log(t)},sortChange:function(t){var e=t.prop,n=t.order;e&&this.sortByID(n,e)},sortByID:function(t,e){this.listQuery.sort="ascending"===t?"+".concat(e):"-".concat(e),console.log(t,e);var n={sorts:JSON.stringify([{column:e,sort:"descending"===t?"desc":"asc"}])};this.getList(n)},getSortClass:function(t){console.log(t);var e=this.listQuery.sort;return e==="+".concat(t)?"ascending":e==="-".concat(t)?"descending":""}}},c=u,l=(n("43d8"),n("2877")),d=Object(l["a"])(c,r,a,!1,null,"f13ae7ca",null);e["a"]=d.exports},"43d8":function(t,e,n){"use strict";var r=n("3206"),a=n.n(r);a.a},"55dd":function(t,e,n){"use strict";var r=n("5ca1"),a=n("d8e8"),i=n("4bf8"),o=n("79e5"),s=[].sort,u=[1,2,3];r(r.P+r.F*(o((function(){u.sort(void 0)}))||!o((function(){u.sort(null)}))||!n("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(i(this)):s.call(i(this),a(t))}})},5802:function(t,e,n){},"5ad2":function(t,e,n){"use strict";n.d(e,"i",(function(){return a})),n.d(e,"f",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"n",(function(){return u})),n.d(e,"g",(function(){return c})),n.d(e,"j",(function(){return l})),n.d(e,"l",(function(){return d})),n.d(e,"a",(function(){return f})),n.d(e,"d",(function(){return m})),n.d(e,"k",(function(){return p})),n.d(e,"h",(function(){return h})),n.d(e,"m",(function(){return g})),n.d(e,"e",(function(){return _}));var r=n("b775");function a(){return r["a"].get("addresses")}function i(t){return r["a"].post("addresses",t)}function o(t,e){return r["a"].patch("addresses/".concat(t),e)}function s(t){return r["a"].delete("addresses/".concat(t))}function u(t,e){return r["a"].post("addresses/".concat(t,"/set_tag"),e)}function c(t){return r["a"].post("cash_rules",t)}function l(t){return r["a"].get("cash",{params:t})}function d(){return r["a"].get("share_rules")}function f(t){return r["a"].post("share_rules",t)}function m(t){return r["a"].post("cash/audit",t)}function p(t){return r["a"].get("games/show_game",{params:t})}function h(t){return r["a"].post("games",t)}function g(t){return r["a"].get("sign_rules",{params:t})}function _(t){return r["a"].post("sign_rules",t)}},8909:function(t,e,n){"use strict";var r=n("5802"),a=n.n(r);a.a},f8a4:function(t,e,n){"use strict";n.d(e,"x",(function(){return a})),n.d(e,"v",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"u",(function(){return s})),n.d(e,"C",(function(){return u})),n.d(e,"j",(function(){return c})),n.d(e,"l",(function(){return l})),n.d(e,"a",(function(){return d})),n.d(e,"k",(function(){return f})),n.d(e,"y",(function(){return m})),n.d(e,"f",(function(){return p})),n.d(e,"p",(function(){return h})),n.d(e,"c",(function(){return g})),n.d(e,"o",(function(){return _})),n.d(e,"A",(function(){return b})),n.d(e,"h",(function(){return v})),n.d(e,"n",(function(){return w})),n.d(e,"b",(function(){return y})),n.d(e,"m",(function(){return k})),n.d(e,"z",(function(){return x})),n.d(e,"D",(function(){return R})),n.d(e,"g",(function(){return D})),n.d(e,"r",(function(){return I})),n.d(e,"d",(function(){return S})),n.d(e,"q",(function(){return N})),n.d(e,"B",(function(){return $})),n.d(e,"i",(function(){return O})),n.d(e,"w",(function(){return C})),n.d(e,"t",(function(){return T})),n.d(e,"s",(function(){return z}));var r=n("b775");function a(t){return r["a"].get("task_products",{params:t})}function i(t){return r["a"].get("products",{params:t})}function o(t){return r["a"].post("task_products",t)}function s(t){return r["a"].get("task_products/".concat(t))}function u(t,e){return r["a"].patch("task_products/".concat(t),e)}function c(t){return r["a"].delete("task_products/".concat(t))}function l(t){return r["a"].get("task_articles",{params:t})}function d(t){return r["a"].post("task_articles",t)}function f(t){return r["a"].get("task_articles/".concat(t))}function m(t,e){return r["a"].patch("task_articles/".concat(t),e)}function p(t){return r["a"].delete("task_articles/".concat(t))}function h(t){return r["a"].get("task_questionnaires",{params:t})}function g(t){return r["a"].post("task_questionnaires",t)}function _(t){return r["a"].get("task_questionnaires/".concat(t))}function b(t,e){return r["a"].patch("task_questionnaires/".concat(t),e)}function v(t){return r["a"].delete("task_questionnaires/".concat(t))}function w(t){return r["a"].get("task_game",{params:t})}function y(t){return r["a"].post("task_game",t)}function k(t){return r["a"].get("task_game/".concat(t))}function x(t,e){return r["a"].patch("task_game/".concat(t),e)}function R(t){return r["a"].post("tasks/audit",t)}function D(t){return r["a"].delete("task_game/".concat(t))}function I(t){return r["a"].get("task_links",{params:t})}function S(t){return r["a"].post("task_links",t)}function N(t){return r["a"].get("task_links/".concat(t))}function $(t,e){return r["a"].patch("task_links/".concat(t),e)}function O(t){return r["a"].delete("task_links/".concat(t))}function C(t,e){return r["a"].get("task_questionnaires/".concat(t,"/reply"),{params:e})}function T(t){return r["a"].get("task_game/".concat(t,"/prizes"))}function z(t,e){return r["a"].get("task_game/".concat(t,"/prize_logs"),{params:e})}},fded:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("TopTitle",{attrs:{title:t.title}}),t._v(" "),n("div",{staticClass:"displayContent"},[n("el-form",{ref:"formNode",staticClass:"form-item",attrs:{model:t.formData,rules:t.formRules,"label-width":"180px"}},[n("el-form-item",{attrs:{label:"每日签到奖励"}}),t._v(" "),n("el-form-item",{attrs:{label:"",prop:"rules"}},[n("el-input",{attrs:{type:"number",placeholder:"请输入内容"},model:{value:t.formData.rules,callback:function(e){t.$set(t.formData,"rules",e)},expression:"formData.rules"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"连续签到奖励",prop:"status"}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}})],1),t._v(" "),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.formData.status,expression:"formData.status"}],attrs:{label:"",prop:"rules2"}},[n("div",[t._l(t.awardRules,(function(e,r){return n("div",{key:r,staticClass:"awardRules"},[n("span",[t._v("连续签到")]),t._v(" "),n("el-input",{attrs:{size:"small",type:"number"},on:{blur:function(){return t.changenumber(e.number,r)}},model:{value:e.number,callback:function(n){t.$set(e,"number",n)},expression:"item.number"}}),t._v(" "),n("span",[t._v(",奖励")]),t._v(" "),n("el-input",{attrs:{size:"small",type:"number"},on:{blur:function(){return t.changeGoldCoin(e.coin,r)}},model:{value:e.coin,callback:function(n){t.$set(e,"coin",n)},expression:"item.coin"}}),t._v(" "),n("span",[t._v("金币")]),t._v(" "),n("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(){return t.triggerDialog("0",r)}}},[t._v("删除")])],1)})),t._v(" "),n("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:function(){return t.triggerDialog("1")}}},[t._v("增加规则")]),t._v(" "),n("span",[t._v("最多添加20个")])],2)]),t._v(" "),n("el-form-item",[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.operationButton(1)}}},[t._v("保存")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.operationButton(2)}}},[t._v("取消")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[n("chooseTask",{attrs:{child:t.tableData},on:{updataId:t.changeTaskId}})],1)],1)],1)},a=[],i=(n("c5f6"),n("ac6a"),n("7b94")),o=n("393d"),s=n("5ad2"),u={components:{TopTitle:i["a"],chooseTask:o["a"]},data:function(){return{BASE_API:Object({NODE_ENV:"production",VUE_APP_BASE_API:"https://api.shjietui.com",BASE_URL:"/"}).BASE_API,dialogTableVisible:!1,formData:{rules:"",status:!1},awardRules:[{number:"",coin:""}],tableData:{type:"",firstColumnName:"",taskId:""},formOption:{goodsImageList:[]},formRules:{rules:[{required:!0,message:"每日签到不能为空",trigger:"change"}]},title:"添加/编辑任务广告",disabled:!1,dialogTitle:""}},created:function(){console.log("当前组件渲染完成:"),this.init()},methods:{init:function(){var t=this;console.log("加载默认数据"),Object(s["m"])().then((function(e){console.log(e),t.formData.rules=e.data[0].coin,Array.isArray(e.data)&&e.data.length>1&&(t.formData.status=!0,t.awardRules=e.data.splice(1,e.data.length-1))}))},onSubmit:function(t){var e=this;console.log(this.formData),console.log(this.awardRules),this.$refs[t].validate((function(t){if(t){var n="",r=!1,a=!1;if(e.formData.status&&e.awardRules.forEach((function(t,n){""!==t.number&&""!==t.coin||(r=!0),t.coin<e.formData.rules&&(a=!0)})),a)return e.$message({type:"error",message:"连续签到奖励必须大于每日签到奖励!"});if(r)return e.$message({type:"error",message:"请完善连续签到奖励内容!"});if(e.formData.status){var i=[{number:1,coin:e.formData.rules}],o=e.awardRules;n={rules:JSON.stringify(i.concat(o))}}else n={rules:JSON.stringify([{number:1,coin:e.formData.rules}])};var u=e.$qs.stringify(n);Object(s["e"])(u).then((function(t){console.log(t),e.init(),e.$message({type:"success",message:"编辑成功!"}),e.reload()})).catch((function(){}))}}))},resetForm:function(t,e){console.log("重置表单:"),this[e]=!1,this.$refs[t].resetFields()},operationButton:function(t){1===t&&this.onSubmit("formNode")},triggerDialog:function(t,e){if("0"===t){if(this.awardRules.length<=1)return this.$message.error("最少保留一条奖励规则");this.awardRules.splice(e,1)}else this.awardRules.length<20?this.awardRules.push({number:"",coin:""}):this.$message.error("最多只能添加20条奖励规则")},changeTaskId:function(t){console.log(t),this.tableData.taskId=t},changenumber:function(t,e){return t<=1?(this.awardRules[e].number="",this.$message.error("连续签到天数不可小于1")):0!==e&&Number(t)<=Number(this.awardRules[e-1].number)?(this.awardRules[e].number="",this.$message.error("天数不可小于上一级")):this.awardRules[e+1]&&(console.log("存在下级"),0!==e&&Number(t)>=Number(this.awardRules[e+1].number)&&""!==this.awardRules[e+1].number)?(this.awardRules[e].number="",this.$message.error("天数不可大于下一级")):void 0},changeGoldCoin:function(t,e){return t<=this.formData.rules?(this.awardRules[e].coin="",this.$message.error("连续签到奖励不可小于每日签到奖励")):0!==e&&Number(t)<=Number(this.awardRules[e-1].coin)?(this.awardRules[e].coin="",this.$message.error("奖励不可小于上一级")):this.awardRules[e+1]&&(console.log("存在下级"),0!==e&&Number(t)>=Number(this.awardRules[e+1].coin)&&""!==this.awardRules[e+1].coin)?(this.awardRules[e].coin="",this.$message.error("奖励不可大于下一级")):void 0}}},c=u,l=(n("8909"),n("2877")),d=Object(l["a"])(c,r,a,!1,null,null,null);e["default"]=d.exports}}]);