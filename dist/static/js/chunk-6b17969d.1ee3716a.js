(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b17969d"],{"3a10":function(t,e,a){"use strict";a.d(e,"g",(function(){return n})),a.d(e,"h",(function(){return s})),a.d(e,"f",(function(){return i})),a.d(e,"e",(function(){return o})),a.d(e,"c",(function(){return l})),a.d(e,"d",(function(){return u})),a.d(e,"a",(function(){return c})),a.d(e,"b",(function(){return d}));var r=a("b775");function n(t){return r["a"].get("orders",{params:t})}function s(t,e){return r["a"].post("orders/".concat(t,"/send"),e)}function i(t){return r["a"].get("orders/".concat(t))}function o(t){return r["a"].get("orders/".concat(t,"/express"))}function l(t){return r["a"].get("after_orders",{params:t})}function u(t,e){return r["a"].post("after_orders/".concat(t,"/after_sale"),e)}function c(t){return r["a"].get("after_orders/".concat(t))}function d(t){return r["a"].get("after_orders/".concat(t,"/express"))}},"531f":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"displayContent"},[a("el-row",[a("div",{staticClass:"block"},[a("el-button",{attrs:{type:"primary"}},[t._v("下单时间")]),t._v(" "),a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions2},on:{change:t.dataTimeChange},model:{value:t.value7,callback:function(e){t.value7=e},expression:"value7"}})],1),t._v(" "),a("div",{staticClass:"inputBox fr"},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.stateValue,callback:function(e){t.stateValue=e},expression:"stateValue"}},t._l(t.statesList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),"0"==t.stateValue?a("el-input",{attrs:{placeholder:"搜索商品名称",size:"small"},on:{change:t.searchValueChange},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:t.searchValueChange},slot:"suffix"})]):t._e(),t._v(" "),"1"==t.stateValue?a("el-input",{attrs:{placeholder:"搜索订单编号",size:"small"},on:{change:t.searchValueChange},model:{value:t.listQuery.no,callback:function(e){t.$set(t.listQuery,"no",e)},expression:"listQuery.no"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:t.searchValueChange},slot:"suffix"})]):t._e()],1)]),t._v(" "),a("div",{staticClass:"orderList"},[a("ul",t._l(t.tableData,(function(e,r){return a("li",{key:r},[a("el-row",{staticClass:"orderTitle"},[a("el-col",{attrs:{span:16}},[a("h3",[t._v("订单编号："+t._s(e.no)),a("span",[t._v("下单时间："+t._s(e.created_at))]),a("span",[t._v("订单类型："+t._s("Order::MoneyOrder"!==e.type?"兑换订单":"交易订单"))])])]),t._v(" "),null!==e.after_order?a("el-col",{attrs:{span:8}},["refund"!==e.after_order?a("el-button",{staticClass:"orderStatus",attrs:{type:"text"},on:{click:function(a){return t.goAfterDetail(e.id,t.query)}}},[t._v("售后中>")]):t._e(),t._v(" "),"refund"===e.after_order?a("el-button",{staticClass:"orderStatus",attrs:{type:"text"},on:{click:function(a){return t.goAfterDetail(e.id,t.query)}}},[t._v("已售后>")]):t._e()],1):t._e()],1),t._v(" "),t._l(e.order_products,(function(r,n){return a("el-row",{key:n,staticClass:"orderMain"},[a("el-col",{staticClass:"orderName",attrs:{span:12}},[a("div",{staticClass:"orderImg"},[a("img",{attrs:{src:r.product.default_image}})]),t._v(" "),a("div",{staticClass:"orderNum"},[a("p",[t._v(t._s(r.product.name))]),t._v(" "),a("p",[t._v("X"+t._s(r.number))])])]),t._v(" "),a("el-col",{staticClass:"orderCoin orderStyle",attrs:{span:4}},[a("p",[t._v("￥"+t._s(r.product.price)+"金币")])]),t._v(" "),a("el-col",{staticClass:"orderStyle",attrs:{span:4}},[t._v("\n              "+t._s(t.statusList[t.query].name)+"\n            ")]),t._v(" "),a("el-col",{staticClass:"orderStyle",attrs:{span:4}},["1"===t.query?a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.sendOrder(e)}}},[t._v("发货")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.goDetail(e.id,t.query)}}},[t._v("查看详情")])],1)],1)}))],2)})),0)]),t._v(" "),t.total?a("div",{staticClass:"pagingBox"},[a("el-pagination",{attrs:{"current-page":t.searchOption.pagination.currentPage,"page-sizes":t.searchOption.pagination.mode,"page-size":t.searchOption.pagination.defaultMode,background:"","prev-text":"上一页","next-text":"下一页",layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1):t._e()],1),t._v(" "),a("el-dialog",{attrs:{title:"发货",visible:t.dialogTableVisible,center:"",width:"40%"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("div",{staticClass:"sendInfo"},[a("h3",[t._v("订单编号："),a("span",[t._v(t._s(t.objQuery.no))])]),t._v(" "),a("h3",[t._v("收获地址："),a("span",[t._v(t._s(t.objQuery.name)+"，"+t._s(t.objQuery.phone)+"，"+t._s(t.objQuery.content))])])]),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"快递公司:",prop:"company"}},[a("el-select",{attrs:{placeholder:"请选择快递公司"},model:{value:t.form.company,callback:function(e){t.$set(t.form,"company",e)},expression:"form.company"}},[a("el-option",{attrs:{value:"EMS",label:"EMS"}}),t._v(" "),a("el-option",{attrs:{value:"STO",label:"申通快递"}}),t._v(" "),a("el-option",{attrs:{value:"YTO",label:"圆通快递"}}),t._v(" "),a("el-option",{attrs:{value:"ZTO",label:"中通快递"}}),t._v(" "),a("el-option",{attrs:{value:"SFEXPRESS",label:"顺丰快递"}}),t._v(" "),a("el-option",{attrs:{value:"YUNDA",label:"韵达快递"}}),t._v(" "),a("el-option",{attrs:{value:"TTKDEX",label:"天天快递"}}),t._v(" "),a("el-option",{attrs:{value:"DEPPON",label:"德邦物流"}}),t._v(" "),a("el-option",{attrs:{value:"HTKY",label:"汇通快递"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"快递单号:",prop:"name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.send}},[t._v("确 定")])],1)],1)],1)},n=[],s=(a("7f7f"),a("28a5"),a("c5f6"),a("ac6a"),a("3a10")),i={props:{query:{type:String,required:!0}},data:function(){return{dialogTableVisible:!1,statesList:[{value:"0",label:"商品名称"},{value:"1",label:"订单编号"}],stateValue:"0",tableData:[{afterSaleStatus:"1",data5:"data4",data6:"data5",data7:"data6",data8:"1",id:1}],inputSearchContent:"",searchOption:{pagination:{currentPage:1,mode:[10,20,50,100],defaultMode:10}},total:100,currentstatus:"",pickerOptions2:{shortcuts:[{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}}]},value7:"",form:{name:"",company:""},listQuery:{page:1,type:"Order::CoinOrder",name:"",no:"",status:"",company_id:"",date_from:"",date_to:"",per_page:10},statusList:{1:{key:"pay",name:"待发货"},2:{key:"send",name:"已发货"},3:{key:"receive",name:"已完成"},4:{key:"cancel",name:"已取消"}},objQuery:{no:"",name:"",phone:"",content:"",id:""},rules:{name:[{required:!0,message:"请输入物流编号",trigger:"blur"}],company:[{required:!0,message:"请选择物流信息",trigger:"change"}]}}},watch:{$route:function(t,e){var a=this;this.currentstatus=this.$route.params.id,this.tableData.forEach((function(t){t.type=a.$route.params.id}))},stateValue:function(t){"0"===t&&(this.listQuery.no=""),"1"===t&&(this.listQuery.name="")},query:function(t){this.listQuery.status=this.statusList[t].key}},created:function(){this.totle=1e3,this.listQuery.status=this.statusList[this.query].key,this.getInit()},methods:{getInit:function(){var t=this;this.listQuery.page=this.searchOption.pagination.currentPage,this.listQuery.status="1"===this.query?"pay":"2"===this.query?"send":"3"===this.query?"receive":"cancel";var e=this.listQuery;Object(s["g"])(e).then((function(e){200===e.status&&(t.tableData=e.data,t.total=Number(e.headers["x-total"]))}))},handleCurrentChange:function(t){this.searchOption.pagination.currentPage=t,this.getInit()},goAfterDetail:function(t,e){this.$router.push({path:"PlatformAfterSaleDetail?orderId=".concat(t)})},goDetail:function(t,e){this.$router.push({path:"platformOrderDetails?orderId=".concat(t,"&status=").concat(e)})},dataTimeChange:function(t){t[0]&&t[1]&&(this.listQuery.date_from=this.$formatDate(t[0].getTime()).split(" ")[0],this.listQuery.date_to=this.$formatDate(t[1].getTime()).split(" ")[0],this.getInit())},searchValueChange:function(){this.getInit()},sendOrder:function(t){this.dialogTableVisible=!0,this.objQuery.no=t.no,this.objQuery.name=t.address.name,this.objQuery.phone=t.address.phone,this.objQuery.content=t.address.content,this.objQuery.id=t.id},send:function(){var t=this;this.$refs["form"].validate((function(e){if(e){var a={no:t.form.name,name:t.form.company},r=t.$qs.stringify(a),n=Number(t.objQuery.id);Object(s["h"])(n,r).then((function(e){200===e.status&&(t.dialogTableVisible=!1,t.getInit())}))}}))}}},o=i,l=(a("c481"),a("2877")),u=Object(l["a"])(o,r,n,!1,null,"2cd45e2c",null);e["default"]=u.exports},"6add":function(t,e,a){},c481:function(t,e,a){"use strict";var r=a("6add"),n=a.n(r);n.a}}]);