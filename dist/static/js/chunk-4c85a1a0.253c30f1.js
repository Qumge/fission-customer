(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c85a1a0","chunk-600fd891"],{"1b29":function(t,a,o){"use strict";var e=o("3812"),s=o.n(e);s.a},3812:function(t,a,o){},"7b94":function(t,a,o){"use strict";var e=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"topTitle"},[o("span"),o("span",{staticClass:"title"},[t._v(t._s(t.title))])])},s=[],i={props:{title:{type:String,required:!0}},data:function(){return{}}},l=i,n=(o("1b29"),o("2877")),r=Object(n["a"])(l,e,s,!1,null,"b4ebadd8",null);a["a"]=r.exports},"86ae":function(t,a,o){"use strict";o.r(a);var e=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"app-container"},[o("TopTitle",{attrs:{title:t.title}}),t._v(" "),o("div",{staticClass:"displayContent"},[o("el-form",{ref:"formNode",staticClass:"form-item",attrs:{model:t.formData,rules:t.formRules,"label-width":"180px"}},[o("el-form-item",{attrs:{label:"商品类目",prop:"goodsClassifyTwo"}},[o("el-select",{attrs:{disabled:t.disabled,placeholder:"请选择"},on:{change:function(a){return t.queryClassifyListByParentId(a,3)}},model:{value:t.formData.goodsClassifyTwo,callback:function(a){t.$set(t.formData,"goodsClassifyTwo",a)},expression:"formData.goodsClassifyTwo"}},t._l(t.formOption.goodsClassifyTwoSelectList,(function(t){return o("el-option",{key:t.classifyId,attrs:{label:t.classifyName,value:t.classifyId}})})),1),t._v(" "),o("el-select",{attrs:{disabled:t.disabled,placeholder:"请选择"},model:{value:t.formData.classifyId,callback:function(a){t.$set(t.formData,"classifyId",a)},expression:"formData.classifyId"}},t._l(t.formOption.classifySelectList,(function(t){return o("el-option",{key:t.classifyId,attrs:{label:t.classifyName,value:t.classifyId}})})),1)],1),t._v(" "),o("el-form-item",{attrs:{label:"商品名称",prop:"brandName"}},[o("el-input",{attrs:{disabled:t.disabled},model:{value:t.formData.brandName,callback:function(a){t.$set(t.formData,"brandName",a)},expression:"formData.brandName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"商品头图",prop:"goodsImageUrlList"}},[t.disabled?o("div",[o("img",{staticClass:"goodsPhone",attrs:{src:t.$commonImg}})]):o("el-upload",{attrs:{"before-upload":t.beforeAvatarUpload,"on-remove":t.handleRemove,"on-success":t.handleAvatarSuccess,"file-list":t.formOption.goodsImageList,limit:5,"on-exceed":t.handleExceed,action:t.BASE_API+"function/file/upload/product","list-type":"picture-card"}},[o("i",{staticClass:"el-icon-plus"}),t._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("345*345 图片大小不超过60k")])])],1),t._v(" "),o("el-form-item",{attrs:{label:"商品价格",prop:"goodsNames"}},[o("el-input",{attrs:{disabled:t.disabled},model:{value:t.formData.goodsNames,callback:function(a){t.$set(t.formData,"goodsNames",a)},expression:"formData.goodsNames"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"购买返金币",prop:"jinbi"}},[o("el-input",{attrs:{disabled:t.disabled},model:{value:t.formData.jinbi,callback:function(a){t.$set(t.formData,"jinbi",a)},expression:"formData.jinbi"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"商品详情",prop:"description"}},[o("Tinymce",{attrs:{disabled:t.disabled},model:{value:t.formData.description,callback:function(a){t.$set(t.formData,"description",a)},expression:"formData.description"}})],1),t._v(" "),t.disabled?o("el-form-item",[o("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("通过")]),t._v(" "),o("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("拒绝")]),t._v(" "),o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.editButton}},[t._v("编辑")])],1):o("el-form-item",[o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.cancelButton}},[t._v("取消")]),t._v(" "),o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.submitButtonTip}},[t._v("保存")])],1)],1)],1)],1)},s=[],i=(o("c5f6"),o("20d6"),o("ac6a"),o("8256")),l=o("7b94"),n={components:{Tinymce:i["a"],TopTitle:l["a"]},data:function(){return{BASE_API:Object({NODE_ENV:"production",VUE_APP_BASE_API:"https://api.shjietui.com",BASE_URL:"/"}).BASE_API,formData:{goodsId:"",brandName:"",goodsName:"",goodsNames:"",goodsClassifyOne:null,goodsClassifyTwo:null,classifyId:null,goodsType:null,goodsImageUrlList:[],specificationsList:[],limitCounts:null,description:"",freightTemplateId:1,own:null,invoice:null,useCoupon:0,returnIntegral:0,integralMultiple:null,recommendGoods:0,cartRecommend:0,goodsStatus:null},formOption:{hasModifyGoodsImage:!1,goodsImageList:[],goodsImageUrlList:[],goodsClassifyOneSelectList:[],goodsClassifyTwoSelectList:[],classifySelectList:[],freightTemplateIdSelectList:[],goodsStatusSelectList:[{value:1,label:"上架"},{value:2,label:"下架"}]},formRules:{aaa:[{required:!0,message:"zzz不能为空",trigger:"change"}]},title:"查看商品",disabled:!0}},created:function(){},methods:{resetForm:function(t,a){console.log("重置表单:"),this[a]=!1,this.$refs[t].resetFields()},getProductInof:function(t){var a=this;console.log("选择当前商品为发布的商品，并获取商品信息:");var o={goodsId:t},e={platformId:this.$route.params.qid};this.$webApi.product("detail",o,e).then((function(o){if(console.log("加载默认数据："),console.log("res"),o.data&&(a.formData.goodsId=t,a.formData=o.data,a.queryClassifyListByParentId(0,1,o.data.goodsClassifyOne),o.goodsClassifyTwo&&a.queryClassifyListByParentId(o.goodsClassifyOne,1,o.data.goodsClassifyTwo),o.classifyId&&a.queryClassifyListByParentId(o.goodsClassifyTwo,1,o.data.classifyId),a.formOption.hasModifyGoodsImage=!1,o.data&&o.data.goodsImageUrlList&&o.data.goodsImageUrlList.length>0&&o.data.goodsImageUrlList.forEach((function(t){var o={name:"aaa",url:t};a.formOption.goodsImageList.push(o),a.formData.goodsImageUrlList.push(o)})),a.formData.specificationsList&&a.formData.specificationsList.length>0)){var e=a.formData.specificationsList.findIndex((function(t){return 1===Number(t.defaultSpecification)}));-1===e&&(a.formData.specificationsList[0].defaultSpecification=1)}a.formOption.categoryOneName=o.data.categoryOneName,a.formOption.categoryTwoName=o.data.categoryTwoName,a.formOption.categoryThreeName=o.data.categoryThreeName}))},handleAvatarSuccessSpecifications:function(t,a,o,e){console.log("文件上传成功:"),console.log(a),console.log(o),console.log(e),"000"===t.code?this.$set(this.formData.specificationsList[e],"thumbnailUrl",t.data):this.$message.error(t.message)},beforeAvatarUploadSpecifications:function(t){console.log("上传文件之前:");var a="image/jpeg"===t.type||"image/png"===t.type;return a||this.$message.error("上传图片只能是 JPG/PNG 格式!"),a},queryClassifyListByParentId:function(t,a,o){var e=this,s={parentId:t},i={platformId:this.$route.params.qid};this.$webApi.public("queryClassifyListByParentId",s,i).then((function(t){console.log("商品分类列表查询-"+a+"级："),1===a?(e.formData.goodsClassifyOne="",e.formData.goodsClassifyTwo="",e.formData.classifyId="",e.formOption.goodsClassifyOneSelectList=t.data&&t.data.length>0?t.data:[],e.formData.goodsClassifyOne=o||""):2===a?(e.formData.goodsClassifyTwo="",e.formData.classifyId="",e.formOption.goodsClassifyTwoSelectList=t.data&&t.data.length>0?t.data:[],e.formData.goodsClassifyTwo=o||""):3===a&&(e.formData.classifyId="",e.formOption.classifySelectList=t.data&&t.data.length>0?t.data:[],e.formData.classifyId=o||"")}))},setDefaultDisplay:function(t){var a=this;this.formData.specificationsList.forEach((function(o,e){a.formData.specificationsList[e].defaultSpecification=t===e?1:0,console.log(a.formData.specificationsList)}))},beforeAvatarUpload:function(t){var a=this;console.log("上传文件之前:");var o="image/jpeg"===t.type||"image/png"===t.type,e=t.size/1024<60;o||this.$message.error("上传图片只能是 JPG/PNG 格式!"),e||this.$message.error("上传图片大小不能超过 60KB!");var s=new Promise((function(a,o){var e=345,s=345,i=window.URL||window.webkitURL,l=new Image;l.onload=function(){var t=l.width===e&&l.height===s;console.log("valid:"),console.log(t),t?a():o()},l.src=i.createObjectURL(t),console.log("img.src:"),console.log(l.src)})).then((function(){return t}),(function(){return a.$message.error("上传的图片大小必须是345*345!"),Promise.reject()}));return o&&e&&s},handleAvatarSuccess:function(t,a,o){console.log("文件上传成功:"),console.log(a),console.log(o),"000"===t.code?(this.formOption.goodsImageUrlList=o,this.formOption.hasModifyGoodsImage=!0):this.$message.error(t.message)},handleRemove:function(t,a){console.log("文件列表移除文件:"),console.log(t,a),this.formOption.goodsImageUrlList=a,this.formOption.hasModifyGoodsImage=!0},handleExceed:function(t,a){console.log("文件超出个数限:"),this.$message.warning("当前限制选择 5 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+a.length," 个文件"))},editButton:function(){this.disabled=!1},submitButtonTip:function(){var t=this;this.$confirm("若保存，则商品变为已发布状态","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.onSubmit("formNode")})).catch((function(){}))},cancelButton:function(){this.disabled=!0}}},r=n,c=o("2877"),d=Object(c["a"])(r,e,s,!1,null,null,null);a["default"]=d.exports}}]);