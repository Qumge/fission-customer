(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0dc7301f"],{"11c8":function(t,n,e){"use strict";e.d(n,"b",(function(){return i})),e.d(n,"g",(function(){return r})),e.d(n,"i",(function(){return u})),e.d(n,"c",(function(){return a})),e.d(n,"k",(function(){return o})),e.d(n,"a",(function(){return s})),e.d(n,"h",(function(){return d})),e.d(n,"j",(function(){return f})),e.d(n,"m",(function(){return p})),e.d(n,"d",(function(){return l})),e.d(n,"e",(function(){return m})),e.d(n,"f",(function(){return h})),e.d(n,"l",(function(){return v}));var c=e("b775");function i(t){return c["a"].get("categories",{params:t})}function r(t){return c["a"].post("categories",t)}function u(t){return c["a"].delete("categories/".concat(t))}function a(t,n){return c["a"].patch("categories/".concat(t),n)}function o(t){return c["a"].get("products",{params:t})}function s(t){return c["a"].post("products/destroy",t)}function d(t){return c["a"].post("products",t)}function f(t){return c["a"].delete("products/".concat(t))}function p(t){return c["a"].get("products/".concat(t))}function l(t,n){return c["a"].patch("products/".concat(t),n)}function m(t){return c["a"].post("products/audit",t)}function h(t){return c["a"].post("products/change_status",t)}function v(){return c["a"].get("qiniu/token")}},1558:function(t,n,e){"use strict";var c=e("e574"),i=e.n(c);i.a},ba61:function(t,n,e){"use strict";e.r(n);var c=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"app-container"},[e("el-button",{staticClass:"add-btn",attrs:{size:"small",icon:"el-icon-circle-plus",type:"primary"},on:{click:t.addParentNode}},[t._v("新增分类")]),t._v(" "),e("el-tree",{attrs:{data:t.prdocutData,"expand-on-click-node":!1,props:t.defaultProps,"node-key":"id","default-expand-all":""},scopedSlots:t._u([{key:"default",fn:function(n){var c=n.node,i=n.data;return e("span",{staticClass:"custom-tree-node"},[e("span",[t._v(t._s(c.label))]),t._v(" "),e("span",[c.level<2?e("el-button",{attrs:{type:"text",icon:"el-icon-plus",size:"mini"},on:{click:function(){return t.append(c,i)}}},[t._v("\n          新增二级分类\n        ")]):t._e(),t._v(" "),e("el-button",{attrs:{type:"text",icon:"el-icon-edit",size:"mini"},on:{click:function(){return t.update(c,i)}}},[t._v("\n          编辑\n        ")]),t._v(" "),e("el-button",{attrs:{type:"text",icon:"el-icon-delete",size:"mini"},on:{click:function(){return t.remove(c,i)}}},[t._v("\n          删除\n        ")])],1)])}}])})],1)},i=[],r=(e("20d6"),e("11c8")),u={data:function(){return{prdocutData:[],defaultProps:{children:"children",label:"name"}}},created:function(){this.init()},methods:{init:function(){var t=this;Object(r["b"])().then((function(n){200===n.status&&(t.prdocutData=n.data)}))},addParentNode:function(t){var n=this;this.$prompt("","请输入商品类别名",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\S+/,inputErrorMessage:"商品类别名称不能为空"}).then((function(t){var e=t.value,c={name:e},i=n.$qs.stringify(c);Object(r["g"])(i).then((function(t){200===t.status&&(n.init(),n.$message({type:"success",message:"新增成功!"}))}))}))},append:function(t,n){var e=this;3===n.level?this.$message({type:"success",message:"商品类别目录深度最多为3级!"}):this.$prompt("","请输入商品类别名",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\S+/,inputErrorMessage:"商品类别名称不能为空"}).then((function(t){var c=t.value,i={name:c,root_id:n.id},u=e.$qs.stringify(i);Object(r["g"])(u).then((function(t){200===t.status&&(e.init(),e.$message({type:"success",message:"新增成功!"}))}))}))},update:function(t,n){var e=this;this.$prompt("","请输入新的商品类别名",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\S+/,inputErrorMessage:"商品类别名称不能为空"}).then((function(t){var c=t.value,i={name:c,root_id:n.parent?n.parent.id:""},u=e.$qs.stringify(i);Object(r["c"])(n.id,u).then((function(t){200===t.status&&(e.init(),e.$message({type:"success",message:"修改成功!"}))}))}))},remove:function(t,n){var e=this;t.childNodes&&t.childNodes.length>0?this.$message({type:"error",message:"当前目录下还有子分类，请先删除子分类再进行此操作!"}):this.$confirm("此操作将永久删除该商品类别, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(c,i,u){"confirm"===c?Object(r["i"])(n.id).then((function(c){if(200===c.status){var i=t.parent,r=i.childNodes||i.data,a=r.findIndex((function(t){return t.data.id===n.id}));r.splice(a,1),e.$message({type:"success",message:"删除成功!"}),u()}})).catch((function(){u()})):u()}})}}},a=u,o=(e("e479"),e("1558"),e("f9a7"),e("2877")),s=Object(o["a"])(a,c,i,!1,null,null,null);n["default"]=s.exports},c259:function(t,n,e){},e479:function(t,n,e){"use strict";var c=e("e545"),i=e.n(c);i.a},e545:function(t,n,e){},e574:function(t,n,e){},f9a7:function(t,n,e){"use strict";var c=e("c259"),i=e.n(c);i.a}}]);