(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cf71af6"],{"11c8":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"e",(function(){return r})),n.d(e,"g",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"i",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"f",(function(){return l})),n.d(e,"h",(function(){return d})),n.d(e,"k",(function(){return p})),n.d(e,"d",(function(){return f})),n.d(e,"j",(function(){return h}));var c=n("b775");function o(t){return c["a"].get("categories",{params:t})}function r(t){return c["a"].post("categories",t)}function a(t){return c["a"].delete("categories/".concat(t))}function i(t,e){return c["a"].patch("categories/".concat(t),e)}function s(t){return c["a"].get("products",{params:t})}function u(t){return c["a"].post("products/destroy",t)}function l(t){return c["a"].post("products",t)}function d(t){return c["a"].delete("products/".concat(t))}function p(t){return c["a"].get("products/".concat(t))}function f(t,e){return c["a"].patch("products/".concat(t),e)}function h(){return c["a"].get("qiniu/token")}},1558:function(t,e,n){"use strict";var c=n("e574"),o=n.n(c);o.a},ba61:function(t,e,n){"use strict";n.r(e);var c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-button",{staticClass:"add-btn",attrs:{size:"small",icon:"el-icon-circle-plus",type:"primary"},on:{click:t.addParentNode}},[t._v("新增分类")]),t._v(" "),n("el-tree",{attrs:{data:t.prdocutData,"expand-on-click-node":!1,props:t.defaultProps,"node-key":"id","default-expand-all":""},scopedSlots:t._u([{key:"default",fn:function(e){var c=e.node,o=e.data;return n("span",{staticClass:"custom-tree-node"},[n("span",[t._v(t._s(c.label))]),t._v(" "),n("span",[c.level<3?n("el-button",{attrs:{type:"text",icon:"el-icon-plus",size:"mini"},on:{click:function(){return t.append(c,o)}}},[t._v("\n          新增二级分类\n        ")]):t._e(),t._v(" "),n("el-button",{attrs:{type:"text",icon:"el-icon-edit",size:"mini"},on:{click:function(){return t.update(c,o)}}},[t._v("\n          编辑\n        ")]),t._v(" "),n("el-button",{attrs:{type:"text",icon:"el-icon-delete",size:"mini"},on:{click:function(){return t.remove(c,o)}}},[t._v("\n          删除\n        ")])],1)])}}])})],1)},o=[],r=(n("20d6"),n("11c8")),a={data:function(){return{prdocutData:[{id:"19",parentId:"0",text:"第一个商品",children:[{id:"21",parentId:"19",text:"213",children:[],hasParent:!0,hasChildren:!1,attributes:null,checked:!1,state:null},{id:"23",parentId:"19",text:"65757",children:[{id:"24",parentId:"23",text:"67567",children:[],hasParent:!0,hasChildren:!1,attributes:null,checked:!1,state:null}],hasParent:!0,hasChildren:!0,attributes:null,checked:!1,state:null},{id:"27",parentId:"19",text:"暗示法萨芬",children:[],hasParent:!0,hasChildren:!1,attributes:null,checked:!1,state:null}],hasParent:!1,hasChildren:!0,attributes:null,checked:!1,state:null},{id:"25",parentId:"0",text:"第二个商品",children:[],hasParent:!1,hasChildren:!1,attributes:null,checked:!1,state:null},{id:"26",parentId:"0",text:"嘎嘎",children:[],hasParent:!1,hasChildren:!1,attributes:null,checked:!1,state:null}],defaultProps:{children:"children",label:"name"}}},created:function(){console.log("初始化："),this.init()},methods:{init:function(){var t=this;Object(r["b"])().then((function(e){console.log("加载默认数据："),console.log(e.data),t.prdocutData=e.data}))},addParentNode:function(t){var e=this;console.log("添加父节点:"),this.$prompt("","请输入商品类别名",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\S+/,inputErrorMessage:"商品类别名称不能为空"}).then((function(t){var n=t.value,c={name:n},o=e.$qs.stringify(c);Object(r["e"])(o).then((function(t){console.log(t),e.init(),e.$message({type:"success",message:"新增成功!"})}))}))},append:function(t,e){var n=this;console.log("新增节点："),console.log(t),3===e.level?this.$message({type:"success",message:"商品类别目录深度最多为3级!"}):this.$prompt("","请输入商品类别名",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\S+/,inputErrorMessage:"商品类别名称不能为空"}).then((function(t){var c=t.value,o={name:c,root_id:e.id},a=n.$qs.stringify(o);Object(r["e"])(a).then((function(t){console.log(t),n.init(),n.$message({type:"success",message:"新增成功!"})}))}))},update:function(t,e){var n=this;console.log("更新："),this.$prompt("","请输入新的商品类别名",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\S+/,inputErrorMessage:"商品类别名称不能为空"}).then((function(t){var c=t.value,o={name:c,root_id:e.parent?e.parent.id:""};console.log(o);var a=n.$qs.stringify(o);Object(r["c"])(e.id,a).then((function(t){console.log(t),n.init(),n.$message({type:"success",message:"修改成功!"})}))}))},remove:function(t,e){var n=this;console.log(t),console.log(e),t.childNodes&&t.childNodes.length>0?this.$message({type:"error",message:"当前目录下还有子分类，请先删除子分类再进行此操作!"}):this.$confirm("此操作将永久删除该商品类别, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(c,o,a){"confirm"===c?(console.log("删除商品类别："),Object(r["g"])(e.id).then((function(c){console.log(c);var o=t.parent,r=o.childNodes||o.data;console.log(r);var i=r.findIndex((function(t){return t.data.id===e.id}));console.log(i),r.splice(i,1),n.$message({type:"success",message:"删除成功!"}),a()})).catch((function(){a()}))):a()}})}}},i=a,s=(n("e479"),n("1558"),n("2877")),u=Object(s["a"])(i,c,o,!1,null,null,null);e["default"]=u.exports},e479:function(t,e,n){"use strict";var c=n("e545"),o=n.n(c);o.a},e545:function(t,e,n){},e574:function(t,e,n){}}]);