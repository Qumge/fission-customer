(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43d8100a"],{"049a":function(t,e,n){"use strict";var a=n("6809"),o=n.n(a);o.a},"26be":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"displayContent"},[n("el-row",[n("el-button",{attrs:{type:"primary"},on:{click:t.go_account}},[t._v("创建商户")]),t._v(" "),n("el-select",{staticClass:"statusBarBtn",attrs:{size:"small",placeholder:"请选择"},on:{change:t.getCompaines},model:{value:t.stateValue,callback:function(e){t.stateValue=e},expression:"stateValue"}},t._l(t.statesList,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(){return t.BatchOperation(1)}}},[t._v("批量冻结")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"small",plain:""},on:{click:function(){return t.BatchOperation(2)}}},[t._v("批量解冻")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(){return t.BatchOperation(3)}}},[t._v("批量删除")]),t._v(" "),n("div",{staticClass:"inputBox fr"},[n("el-input",{attrs:{placeholder:"搜索商户名称",size:"small"},on:{blur:t.getCompaines},model:{value:t.inputSearchContent,callback:function(e){t.inputSearchContent=e},expression:"inputSearchContent"}},[n("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})])],1)],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"30"}}),t._v(" "),n("el-table-column",{attrs:{prop:"no",label:"商户编号",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{prop:"name",label:"商户名称",width:"220"}}),t._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s("active"==e.row.status?"正常":"已冻结")+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"created_at",label:"创建时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.created_at?[t._v("\n          "+t._s(e.row.created_at)+"\n        ")]:void 0}}],null,!0)}),t._v(" "),n("el-table-column",{attrs:{prop:"status",width:"230",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return t.CheckOperation(e.row.id)}}},[t._v("查看")]),t._v(" "),"active"===e.row.status?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return t.SingleOperation(e.row,1)}}},[t._v("冻结")]):t._e(),t._v(" "),"locked"===e.row.status?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return t.SingleOperation(e.row,1)}}},[t._v("解冻")]):t._e(),t._v(" "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return t.SingleOperation(e.row.id,3)}}},[t._v("删除")])]}}])})],1),t._v(" "),t.total?n("div",{staticClass:"pagingBox"},[n("el-pagination",{attrs:{"current-page":t.searchOption.pagination.currentPage,"page-sizes":t.searchOption.pagination.mode,"page-size":t.searchOption.pagination.defaultMode,background:"","prev-text":"上一页","next-text":"下一页",layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1):t._e()],1)])},o=[],s=(n("7f7f"),n("c5f6"),n("ac6a"),n("a883")),i=n("ed08"),c={data:function(){return{statesList:[{value:"",label:"所有状态"},{value:"active",label:"正常"},{value:"locked",label:"已冻结"}],stateValue:"",tableData:[],inputSearchContent:"",searchOption:{pagination:{currentPage:1,mode:[10,20,50,100],defaultMode:10}},total:100,currentstatus:"",arrID:[]}},watch:{$route:function(t,e){var n=this;console.log(t),this.currentstatus=this.$route.params.id,this.tableData.forEach((function(t){t.data3=n.$route.params.id}))}},created:function(){console.log(this.searchOption.pagination.currentPage),this.getCompaines()},methods:{formatDate:i["d"],getCompaines:function(){var t=this,e={page:this.searchOption.pagination.currentPage,status:this.stateValue,search:this.inputSearchContent,per_page:15};Object(s["e"])(e).then((function(e){console.log(e.data),console.log(e.headers["x-total-pages"]),t.total=Number(e.headers["x-total"]),t.tableData=e.data}))},handleCurrentChange:function(t){console.log(t)},handleSelectionChange:function(t){console.log(t);var e=[];t.forEach((function(t,n,a){console.log(t),e.push(t.id)})),this.arrID=e,console.log(e,this.arrID)},BatchOperation:function(t){var e=this;if(1===t||2===t){var n=new FormData;n.append("status",1===t?"locked":"active"),n.append("ids",JSON.stringify(this.arrID));var a=2===t?"此操作将解冻商户，是否继续？":"此操作将冻结商户，是否继续？";this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["a"])(n).then((function(t){e.$message({message:"操作成功",type:"success"}),e.getCompaines()}))}))}else if(3===t){var o=new FormData;o.append("ids",JSON.stringify(this.arrID)),this.$confirm("此操作将删除商户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["b"])(o).then((function(t){console.log(t),e.$message({message:"删除商户成功",type:"success"}),e.getCompaines()}))}))}},SingleOperation:function(t,e){var n=this;if(3===e)this.$confirm("此操作将删除商户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["g"])(t).then((function(t){console.log(t),n.$message({message:"删除商户成功",type:"success"}),n.getCompaines()}))}));else if(1===e){var a=t,o="locked"===a.status?"active":"locked",i=new FormData;i.append("name",a.name),i.append("login",a.customer.login),i.append("status",o);var c=a.id,r="locked"===a.status?"此操作将解冻商户，是否继续？":"此操作将冻结商户，是否继续？";this.$confirm(r,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["c"])(c,i).then((function(t){console.log(t),n.$message({message:"操作成功",type:"success"}),n.getCompaines()}))}))}},go_account:function(){this.$router.push({path:"addMerchant"})},CheckOperation:function(t){this.$router.push({path:"merchantDetails?id=".concat(t)})}}},r=c,l=(n("049a"),n("2877")),u=Object(l["a"])(r,a,o,!1,null,"579a6492",null);e["default"]=u.exports},6809:function(t,e,n){},a883:function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return i})),n.d(e,"c",(function(){return c})),n.d(e,"g",(function(){return r})),n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return u}));var a=n("b775");function o(t){return Object(a["a"])({url:"/companies",method:"post",data:t})}function s(t){return a["a"].get("/companies",{params:t})}function i(t){return a["a"].get("/companies/".concat(t))}function c(t,e){return Object(a["a"])({url:"/companies/".concat(t),method:"patch",data:e})}function r(t){return a["a"].delete("/companies/".concat(t))}function l(t){return a["a"].post("/companies/change_status",t)}function u(t){return a["a"].post("/companies/destroy",t)}}}]);