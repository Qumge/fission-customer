(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c61eb09"],{"07d9":function(t,e,n){},4205:function(t,e,n){},"5d4c":function(t,e,n){"use strict";var o=n("07d9"),i=n.n(o);i.a},"61a9f":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("TopTitle",{attrs:{title:t.title}}),t._v(" "),n("div",{staticClass:"EditMain"},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"任务时间"}},[n("el-col",{attrs:{span:5}},[n("el-date-picker",{staticStyle:{},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:t.form.valid_from,callback:function(e){t.$set(t.form,"valid_from",e)},expression:"form.valid_from"}})],1),t._v(" "),n("el-col",{staticClass:"line",attrs:{span:1}},[t._v("至")]),t._v(" "),n("el-col",{attrs:{span:5}},[n("el-date-picker",{staticStyle:{},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:t.form.valid_to,callback:function(e){t.$set(t.form,"valid_to",e)},expression:"form.valid_to"}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"剩余金币"}},[n("el-input",{staticStyle:{width:"600px"},model:{value:t.form.residue_coin,callback:function(e){t.$set(t.form,"residue_coin",e)},expression:"form.residue_coin"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"问卷标题"}},[n("el-input",{staticStyle:{width:"600px"},model:{value:t.form.questionnaire.name,callback:function(e){t.$set(t.form.questionnaire,"name",e)},expression:"form.questionnaire.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{staticStyle:{width:"600px",resize:"none"},attrs:{type:"textarea",rows:4},model:{value:t.form.questionnaire.desc,callback:function(e){t.$set(t.form.questionnaire,"desc",e)},expression:"form.questionnaire.desc"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"问卷内容"}},[t._l(t.form.questionnaire.questions,(function(e,o){return n("div",{key:o,staticClass:"questionList"},[n("el-row",[n("el-col",{attrs:{span:5}},[n("el-form-item",{attrs:{label:"Q1","label-width":"30px"}},[n("el-input",{model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"item.name"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:5}},[n("el-select",{attrs:{placeholder:"请选择问题格式"},on:{change:function(n){return t.changeSelect(o,e.type)}},model:{value:e.type,callback:function(n){t.$set(e,"type",n)},expression:"item.type"}},[n("el-option",{attrs:{label:"单选",value:"Question::Single"}}),t._v(" "),n("el-option",{attrs:{label:"多选",value:"Question::Multiple"}}),t._v(" "),n("el-option",{attrs:{label:"文本",value:"Question::Completion"}}),t._v(" "),n("el-option",{attrs:{label:"下拉选择",value:"Question::Select"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:1}},[n("i",{staticClass:"el-icon-delete",on:{click:function(){return t.deleteQuestion(o)}}})])],1),t._v(" "),n("el-row",t._l(e.options,(function(e,o){return n("el-col",{key:o,attrs:{span:6}},[n("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{label:"选项"+(o+1),"label-width":"60px"}},[n("el-input",{model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"item2.name"}})],1)],1)})),1),t._v(" "),n("el-row",["Question::Completion"!==e.type?n("div",{staticClass:"formNotice",on:{click:function(){return t.addOptions(o)}}},[t._v("+添加选项"),n("span",[t._v("最多添加10个选项")])]):t._e()])],1)})),t._v(" "),n("div",{staticClass:"formNotice",staticStyle:{"margin-top":"10px"},on:{click:function(){return t.addQuestions(t.key)}}},[t._v("+添加问题"),n("span",[t._v("最多添加10个问题")])])],2),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提交审核")]),t._v(" "),n("el-button",{on:{click:t.back}},[t._v("取消")]),t._v(" "),n("el-button",[t._v("预览")])],1)],1)],1)],1)},i=[],a=(n("7f7f"),n("7b94")),r=n("f8a4"),s={components:{TopTitle:a["a"]},data:function(){return{title:"",form:{residue_coin:"",valid_from:"",valid_to:"",questionnaire:{name:"",desc:"",questions:[]}}}},created:function(){this.form.valid_from=new Date,this.form.valid_to=this.fun_date(7),this.getDetail()},methods:{handleClick:function(t,e){console.log(t,e)},go_prize:function(){this.$router.push({path:"businessPrizeManagement"})},onSubmit:function(){var t=this;if(void 0===this.$route.query.id){var e=new FormData;e.append("name",this.form.questionnaire.name),e.append("desc",this.form.questionnaire.desc),e.append("questions",JSON.stringify(this.form.questionnaire.questions)),e.append("coin",this.form.residue_coin),e.append("valid_from",this.form.valid_from),e.append("valid_to",this.form.valid_to),Object(r["c"])(e).then((function(e){console.log(e),t.$message({message:"添加成功",type:"success"}),t.$router.go(-1)}))}else{var n=this.$route.query.id,o=new FormData;o.append("name",this.form.questionnaire.name),o.append("desc",this.form.questionnaire.desc),o.append("questions",JSON.stringify(this.form.questionnaire.questions)),o.append("coin",this.form.residue_coin),o.append("valid_from",this.form.valid_from),o.append("valid_to",this.form.valid_to),Object(r["x"])(n,o).then((function(e){console.log(e),t.$message({message:"修改成功",type:"success"}),t.$router.go(-1)}))}},getDetail:function(){var t=this;if(void 0!==this.$route.query.id){this.title="编辑调查问卷";var e=this.$route.query.id;Object(r["o"])(e).then((function(e){console.log(e),t.form=e.data}))}else this.title="发布调查问卷"},addOptions:function(t){console.log(this.form.questionnaire.questions[t].options.length),this.form.questionnaire.questions[t].options.length<10?this.form.questionnaire.questions[t].options.push({name:""}):this.$message.error("最多添加10个选项！")},addQuestions:function(t){this.form.questionnaire.questions.length<10?this.form.questionnaire.questions.push({name:"",options:[{name:""}],type:""}):this.$message.error("最多添加10个问题！")},changeSelect:function(t,e){"Question::Completion"===e&&(this.form.questionnaire.questions[t].options=[])},deleteQuestion:function(t){this.form.questionnaire.questions.splice(t,1)},fun_date:function(t){var e=new Date,n=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();console.log(n);var o=new Date(e);o.setDate(e.getDate()+t);var i=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate();return console.log(i),i},back:function(){this.$router.go(-1)}}},u=s,c=(n("5d4c"),n("2877")),l=Object(c["a"])(u,o,i,!1,null,"4469d6be",null);e["default"]=l.exports},"7b94":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"topTitle"},[n("span"),n("span",{staticClass:"title"},[t._v(t._s(t.title))])])},i=[],a={props:{title:{type:String,required:!0}},data:function(){return{}}},r=a,s=(n("d98e"),n("2877")),u=Object(s["a"])(r,o,i,!1,null,"24a0e96e",null);e["a"]=u.exports},d98e:function(t,e,n){"use strict";var o=n("4205"),i=n.n(o);i.a},f8a4:function(t,e,n){"use strict";n.d(e,"u",(function(){return i})),n.d(e,"t",(function(){return a})),n.d(e,"e",(function(){return r})),n.d(e,"s",(function(){return s})),n.d(e,"z",(function(){return u})),n.d(e,"j",(function(){return c})),n.d(e,"l",(function(){return l})),n.d(e,"a",(function(){return f})),n.d(e,"k",(function(){return d})),n.d(e,"v",(function(){return p})),n.d(e,"f",(function(){return m})),n.d(e,"p",(function(){return _})),n.d(e,"c",(function(){return v})),n.d(e,"o",(function(){return h})),n.d(e,"x",(function(){return g})),n.d(e,"h",(function(){return k})),n.d(e,"n",(function(){return q})),n.d(e,"b",(function(){return b})),n.d(e,"m",(function(){return y})),n.d(e,"w",(function(){return w})),n.d(e,"A",(function(){return $})),n.d(e,"g",(function(){return x})),n.d(e,"r",(function(){return S})),n.d(e,"d",(function(){return C})),n.d(e,"q",(function(){return D})),n.d(e,"y",(function(){return Q})),n.d(e,"i",(function(){return M}));var o=n("b775");function i(t){return o["a"].get("task_products",{params:t})}function a(t){return o["a"].get("products",{params:t})}function r(t){return o["a"].post("task_products",t)}function s(t){return o["a"].get("task_products/".concat(t))}function u(t,e){return o["a"].patch("task_products/".concat(t),e)}function c(t){return o["a"].delete("task_products/".concat(t))}function l(t){return o["a"].get("task_articles",{params:t})}function f(t){return o["a"].post("task_articles",t)}function d(t){return o["a"].get("task_articles/".concat(t))}function p(t,e){return o["a"].patch("task_articles/".concat(t),e)}function m(t){return o["a"].delete("task_articles/".concat(t))}function _(t){return o["a"].get("task_questionnaires",{params:t})}function v(t){return o["a"].post("task_questionnaires",t)}function h(t){return o["a"].get("task_questionnaires/".concat(t))}function g(t,e){return o["a"].patch("task_questionnaires/".concat(t),e)}function k(t){return o["a"].delete("task_questionnaires/".concat(t))}function q(t){return o["a"].get("task_game",{params:t})}function b(t){return o["a"].post("task_game",t)}function y(t){return o["a"].get("task_game/".concat(t))}function w(t,e){return o["a"].patch("task_game/".concat(t),e)}function $(t){return o["a"].post("tasks/audit",t)}function x(t){return o["a"].delete("task_game/".concat(t))}function S(t){return o["a"].get("task_links",{params:t})}function C(t){return o["a"].post("task_links",t)}function D(t){return o["a"].get("task_links/".concat(t))}function Q(t,e){return o["a"].patch("task_links/".concat(t),e)}function M(t){return o["a"].delete("task_links/".concat(t))}}}]);