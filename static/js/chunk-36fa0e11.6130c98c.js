(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36fa0e11"],{"11c8":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"e",(function(){return i})),n.d(e,"g",(function(){return r})),n.d(e,"c",(function(){return s})),n.d(e,"i",(function(){return c})),n.d(e,"a",(function(){return l})),n.d(e,"f",(function(){return u})),n.d(e,"h",(function(){return d})),n.d(e,"k",(function(){return f})),n.d(e,"d",(function(){return p})),n.d(e,"j",(function(){return m}));var o=n("b775");function a(t){return o["a"].get("categories",{params:t})}function i(t){return o["a"].post("categories",t)}function r(t){return o["a"].delete("categories/".concat(t))}function s(t,e){return o["a"].patch("categories/".concat(t),e)}function c(t){return o["a"].get("products",{params:t})}function l(t){return o["a"].post("products/destroy",t)}function u(t){return o["a"].post("products",t)}function d(t){return o["a"].delete("products/".concat(t))}function f(t){return o["a"].get("products/".concat(t))}function p(t,e){return o["a"].patch("products/".concat(t),e)}function m(){return o["a"].get("qiniu/token")}},4205:function(t,e,n){},"7b94":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"topTitle"},[n("span"),n("span",{staticClass:"title"},[t._v(t._s(t.title))])])},a=[],i={props:{title:{type:String,required:!0}},data:function(){return{}}},r=i,s=(n("d98e"),n("2877")),c=Object(s["a"])(r,o,a,!1,null,"24a0e96e",null);e["a"]=c.exports},"9a53":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("TopTitle",{attrs:{title:t.title}}),t._v(" "),n("div",{staticClass:"EditMain"},[n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"活动名称"}},[n("el-input",{staticStyle:{width:"600px"},model:{value:t.form.game.name,callback:function(e){t.$set(t.form.game,"name",e)},expression:"form.game.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"任务时间"}},[n("el-col",{attrs:{span:5}},[n("el-date-picker",{staticStyle:{},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.form.valid_from,callback:function(e){t.$set(t.form,"valid_from",e)},expression:"form.valid_from"}})],1),t._v(" "),n("el-col",{staticClass:"line",attrs:{span:1}},[t._v("至")]),t._v(" "),n("el-col",{attrs:{span:5}},[n("el-date-picker",{staticStyle:{},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.form.valid_to,callback:function(e){t.$set(t.form,"valid_to",e)},expression:"form.valid_to"}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"剩余金币"}},[n("el-input",{staticStyle:{width:"600px"},model:{value:t.form.residue_coin,callback:function(e){t.$set(t.form,"residue_coin",e)},expression:"form.residue_coin"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"中奖设置"}},[n("div",{staticClass:"prizeList"},[n("el-row",[n("el-col",{attrs:{span:6}},[t._v("\n              奖品\n            ")]),t._v(" "),n("el-col",{attrs:{span:6}},[t._v("\n              中奖概率\n            ")])],1),t._v(" "),t._l(t.prizes,(function(e,o){return n("div",{key:o,staticClass:"gameList"},[n("el-row",[1===e.type?n("el-col",{attrs:{span:3}},[n("el-button",{on:{click:function(e){return t.choosePrize(o)}}},[t._v("+选择奖励")])],1):t._e(),t._v(" "),2===e.type?n("el-col",{attrs:{span:3}},[t._v("\n                金币："+t._s(e.coin)+"\n              ")]):t._e(),t._v(" "),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{type:"text"}},[t._v("修改")])],1),t._v(" "),n("el-col",{attrs:{span:3}},[n("el-input",{staticStyle:{width:"100px"},model:{value:e.num,callback:function(n){t.$set(e,"num",n)},expression:"gameItem.num"}})],1),t._v(" "),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(e){return t.deleteGamesPrizes(o)}}})],1)],1)],1)})),t._v(" "),n("div",{staticStyle:{"font-size":"12px"}},[n("el-button",{staticStyle:{"font-size":"12px","margin-right":"10px"},attrs:{type:"text"},on:{click:t.addGamesPrizes}},[t._v("+新增")]),t._v("中奖概率之和必须为100%")],1)],2)]),t._v(" "),n("el-form-item",{attrs:{label:"商品头图",prop:"images"}},[t.disabled?n("div",[n("img",{staticClass:"goodsPhone",attrs:{src:t.$commonImg}})]):n("el-upload",{attrs:{data:t.QiniuData,"before-upload":t.beforeAvatarUpload,"on-remove":t.handleRemove,"on-success":t.handleAvatarSuccess,"file-list":t.formOption.goodsImageList,limit:5,"on-exceed":t.handleExceed,action:"https://upload-z2.qiniup.com","list-type":"picture-card"}},[n("i",{staticClass:"el-icon-plus"}),t._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("345*345 图片大小不超过60k")])])],1),t._v(" "),n("el-form-item",{attrs:{label:"游戏说明"}},[n("el-input",{staticStyle:{width:"600px",resize:"none"},attrs:{type:"textarea",rows:4},model:{value:t.form.game.desc,callback:function(e){t.$set(t.form.game,"desc",e)},expression:"form.game.desc"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"}},[t._v("返回")]),t._v(" "),n("el-button",[t._v("拒绝")]),t._v(" "),n("el-button",[t._v("通过")])],1)],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"提示",visible:t.centerDialogVisible,width:"50%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[n("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"金币奖励",name:"first"}},[n("div",{staticClass:"demo-input-suffix"},[t._v("\n          奖励金币数：\n          "),n("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.form.coinNum,callback:function(e){t.$set(t.form,"coinNum",e)},expression:"form.coinNum"}})],1)]),t._v(" "),n("el-tab-pane",{staticClass:"goodsMain",attrs:{label:"实物奖励",name:"second"}},[n("div",{staticClass:"searchInput"},[n("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索","suffix-icon":"el-icon-search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),void 0!==t.form.goodsList?n("el-row",t._l(t.form.goodsList.goodItme,(function(e,o){return n("el-col",{key:o,attrs:{span:12}},[n("img",{staticClass:"goodsImg",attrs:{src:t.$commonImg}}),t._v(" "),n("span",[t._v(t._s(e.goodstitle))])])})),1):t._e(),t._v(" "),void 0!==t.form.goodsList?n("div",{staticClass:"pagingBox"},[n("el-pagination",{attrs:{"current-page":t.form.goodsList.searchOption.pagination.currentPage,"page-sizes":t.form.goodsList.searchOption.pagination.mode,"page-size":t.form.goodsList.searchOption.pagination.defaultMode,background:"","prev-text":"上一页","next-text":"下一页",layout:"prev, pager, next, jumper",total:t.form.goodsList.total},on:{"current-change":t.handleCurrentChange}})],1):t._e()],1),t._v(" "),n("el-tab-pane",{attrs:{label:"不中奖",name:"third"}},[t._v("此项将设置为不中奖")])],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.commitPrize}},[t._v("确 定")])],1)],1)],1)},a=[],i=(n("ac6a"),n("7f7f"),n("7b94")),r=n("11c8"),s=n("f8a4"),c=n("5f87"),l={components:{TopTitle:i["a"]},data:function(){return{BASE_API:Object({NODE_ENV:"production",VUE_APP_BASE_API:"https://api.shjietui.com",BASE_URL:"/"}).BASE_API,activeName:"first",title:"",centerDialogVisible:!1,search:"",form:{residue_coin:"1200",valid_from:"2019-11-14",valid_to:"2019-11-15",game:{name:"",desc:"",prizes:[]},data4:"20%",images:"",coinNum:"",goodsList:{searchOption:{pagination:{currentPage:1,mode:[10,20,50,100],defaultMode:10}},total:100,goodItme:[{goodstitle:"商品1",img:""},{goodstitle:"商品2",img:""}]}},formOption:{goodsClassifyOneSelectList:[],goodsClassifyTwoSelectList:[],hasModifyGoodsImage:""},QiniuData:{key:"",token:""},uploadPicUrl:"",qiniuaddr:"http://file.shjietui.com/",disabled:!1,prizes:[],currentIndex:""}},mounted:function(){var t=this;Object(r["j"])().then((function(e){t.QiniuData.token=e.data.qiniu_token}))},created:function(){this.title=void 0===this.$route.query.id?"发布游戏任务":"编辑游戏任务",this.getDetails(),this.getGoodList()},methods:{handleClick:function(t,e){console.log(t,e)},handleCurrentChange:function(t){console.log(t)},handleRemove:function(t,e){console.log("文件列表移除文件:"),console.log(t,e),this.form.images=e,this.formOption.hasModifyGoodsImage=!0},handleExceed:function(t,e){console.log("文件超出个数限:"),this.$message.warning("当前限制选择 5 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},handleAvatarSuccessSpecifications:function(t,e,n,o){console.log("文件上传成功:"),console.log(t),console.log(e),console.log(n),console.log(o)},beforeAvatarUploadSpecifications:function(t){console.log("上传文件之前:");var e="image/jpeg"===t.type||"image/png"===t.type;return e||this.$message.error("上传图片只能是 JPG/PNG 格式!"),e},beforeAvatarUpload:function(t){var e=this;console.log("上传文件之前:");var n="image/jpeg"===t.type||"image/png"===t.type,o=t.size/1024<60;n||this.$message.error("上传图片只能是 JPG/PNG 格式!"),o||this.$message.error("上传图片大小不能超过 60KB!");var a=new Promise((function(e,n){var o=345,a=345,i=window.URL||window.webkitURL,r=new Image;r.onload=function(){var t=r.width===o&&r.height===a;console.log("valid:"),console.log(t),t?e():n()},r.src=i.createObjectURL(t),console.log("img.src:"),console.log(r.src)})).then((function(){return t}),(function(){return e.$message.error("上传的图片大小必须是345*345!"),Promise.reject()}));return this.QiniuData.key="".concat(Object(c["c"])()).concat(t.name),n&&o&&a},handleAvatarSuccess:function(t,e,n){console.log("文件上传成功:"),console.log(t),console.log(e),console.log(n),this.uploadPicUrl="".concat(this.qiniuaddr).concat(t.hash).concat(t.key),console.log(this.uploadPicUrl);var o=[];n.forEach((function(t){o.push(t.response.key)})),this.form.images=o,this.formOption.hasModifyGoodsImage=!0},getDetails:function(){var t=this;if(void 0!==this.$route.query.id){var e=this.$route.query.id;Object(s["f"])(e).then((function(e){console.log(e),t.form=e.data}))}},getGoodList:function(){var t={type:"",search:"",company_id:"",status:"",page:1,per_page:15};Object(s["k"])(t).then((function(t){console.log(t)}))},addGamesPrizes:function(){this.prizes.push({type:1,num:""}),console.log(this.prizes)},deleteGamesPrizes:function(t){console.log(this.prizes,t),this.prizes.splice(t,1)},choosePrize:function(t){this.centerDialogVisible=!0,this.currentIndex=t},commitPrize:function(){this.centerDialogVisible=!1,"first"===this.activeName&&(console.log(this.prizes),this.prizes[this.currentIndex]={type:2,coin:this.form.coinNum,num:""})}}},u=l,d=(n("ba31"),n("2877")),f=Object(d["a"])(u,o,a,!1,null,"3de64f0f",null);e["default"]=f.exports},ba31:function(t,e,n){"use strict";var o=n("cb23"),a=n.n(o);a.a},cb23:function(t,e,n){},d98e:function(t,e,n){"use strict";var o=n("4205"),a=n.n(o);a.a},f8a4:function(t,e,n){"use strict";n.d(e,"l",(function(){return a})),n.d(e,"k",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"j",(function(){return s})),n.d(e,"o",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"a",(function(){return u})),n.d(e,"d",(function(){return d})),n.d(e,"m",(function(){return f})),n.d(e,"i",(function(){return p})),n.d(e,"b",(function(){return m})),n.d(e,"h",(function(){return g})),n.d(e,"n",(function(){return v})),n.d(e,"g",(function(){return h})),n.d(e,"f",(function(){return _})),n.d(e,"p",(function(){return b}));var o=n("b775");function a(t){return o["a"].get("task_products",{params:t})}function i(t){return o["a"].get("products",{params:t})}function r(t){return o["a"].post("task_products",t)}function s(t){return o["a"].get("task_products/".concat(t))}function c(t,e){return o["a"].patch("task_products/".concat(t),e)}function l(t){return o["a"].get("task_articles",{params:t})}function u(t){return o["a"].post("task_articles",t)}function d(t){return o["a"].get("task_articles/".concat(t))}function f(t,e){return o["a"].patch("task_articles/".concat(t),e)}function p(t){return o["a"].get("task_questionnaires",{params:t})}function m(t){return o["a"].post("task_questionnaires",t)}function g(t){return o["a"].get("task_questionnaires/".concat(t))}function v(t,e){return o["a"].patch("task_questionnaires/".concat(t),e)}function h(t){return o["a"].get("task_game",{params:t})}function _(t){return o["a"].get("task_game/".concat(t))}function b(t){return o["a"].post("tasks/audit",t)}}}]);