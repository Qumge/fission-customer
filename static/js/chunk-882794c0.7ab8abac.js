(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-882794c0"],{"1b29":function(e,n,t){"use strict";var o=t("3812"),r=t.n(o);r.a},3812:function(e,n,t){},"7b94":function(e,n,t){"use strict";var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"topTitle"},[t("span"),t("span",{staticClass:"title"},[e._v(e._s(e.title))])])},r=[],a={props:{title:{type:String,required:!0}},data:function(){return{}}},i=a,l=(t("1b29"),t("2877")),c=Object(l["a"])(i,o,r,!1,null,"b4ebadd8",null);n["a"]=c.exports},fb6d:function(e,n,t){"use strict";t.r(n);var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"app-container"},[t("TopTitle",{attrs:{title:e.title}}),e._v(" "),t("div",{staticClass:"displayContent"},[t("el-form",{ref:"formNode",staticClass:"form-item",attrs:{model:e.formData,rules:e.formRules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[t("el-input",{model:{value:e.formData.name,callback:function(n){e.$set(e.formData,"name",n)},expression:"formData.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"权限点",prop:"resources"}},[t("el-tree",{ref:"tree1",staticClass:"filter-tree",attrs:{data:e.filterData,"show-checkbox":"","default-expand-all":!0,"node-key":"title","current-node-key":e.aaa,props:e.defaultProps,"filter-node-method":e.DisplayNote},on:{"check-change":e.getSelectedMenu}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.resetForm("formNode")}}},[e._v("取消")]),e._v(" "),t("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(n){return e.onSubmit("formNode")}}},[e._v("保存")])],1)],1)],1)],1)},r=[],a=(t("7f7f"),t("ac6a"),t("072e")),i=t("7b94"),l={components:{TopTitle:i["a"]},data:function(){return{aaa:"",title:"添加 / 编辑角色",formData:{name:"",resources:""},formRules:{name:[{required:!0,message:"角色名称不能为空",trigger:"change"}],resources:[{required:!0,message:"权限不能为空",trigger:"change"}]},data2:[{path:"/main",component:function(){return Promise.resolve().then(t.bind(null,"c1f7"))},title:"首页",children:[{path:"index",name:"index",component:function(){return Promise.all([t.e("chunk-14da9915"),t.e("chunk-b88c621a")]).then(t.bind(null,"9406"))},hidden:!0,icon:"zhuye",title:"首页"}]},{path:"/commodity/",component:function(){return Promise.resolve().then(t.bind(null,"c1f7"))},icon:"shangpin",title:"商品管理",children:[{path:"businessCommodity",name:"businessCommodity",component:function(){return Promise.resolve().then(t.bind(null,"1a4e"))},title:"商家商品"},{path:"goldCoinMall",name:"goldCoinMall",component:function(){return Promise.resolve().then(t.bind(null,"1a4e"))},title:"金币商城"},{path:"commodityClassification",name:"commodityClassification",component:function(){return t.e("chunk-0dc7301f").then(t.bind(null,"ba61"))},title:"商品分类"}]},{path:"/order/",component:function(){return Promise.resolve().then(t.bind(null,"c1f7"))},icon:"box",title:"订单管理",children:[{path:"platformOrderState",name:"platformOrderState",component:function(){return Promise.resolve().then(t.bind(null,"1a4e"))},title:"平台订单"},{path:"merchantOrderState",name:"merchantOrderState",component:function(){return Promise.resolve().then(t.bind(null,"1a4e"))},title:"商户订单"}]},{path:"/task/",component:function(){return Promise.resolve().then(t.bind(null,"c1f7"))},icon:"renwu",title:"任务管理",children:[{path:"commodityTask",name:"commodityTask",component:function(){return Promise.resolve().then(t.bind(null,"1a4e"))},title:"商品任务"},{path:"gameTask",name:"gameTask",component:function(){return Promise.resolve().then(t.bind(null,"1a4e"))},title:"游戏任务"},{path:"investigationTask",name:"investigationTask",component:function(){return Promise.resolve().then(t.bind(null,"1a4e"))},title:"调查任务"},{path:"readTask",name:"readTask",component:function(){return Promise.resolve().then(t.bind(null,"1a4e"))},title:"阅读任务"}]},{path:"/release/",component:function(){return Promise.resolve().then(t.bind(null,"c1f7"))},icon:"fabu",title:"发布管理"},{path:"/merchant/",component:function(){return Promise.resolve().then(t.bind(null,"c1f7"))},icon:"shanghu",title:"商户管理"},{path:"/data/",component:function(){return Promise.resolve().then(t.bind(null,"c1f7"))},icon:"shuju",title:"数据管理",children:[{path:"operateTaskData",name:"commodityState",component:function(){return Promise.resolve().then(t.bind(null,"1a4e"))},title:"任务数据"},{path:"userData",name:"commodityState",component:function(){return Promise.all([t.e("chunk-commons"),t.e("chunk-14da9915"),t.e("chunk-27ba1be5")]).then(t.bind(null,"ba8f"))},props:function(e){return{query:"userData"}},title:"用户数据"},{path:"merchantData",name:"commodityState",component:function(){return Promise.all([t.e("chunk-commons"),t.e("chunk-14da9915"),t.e("chunk-27ba1be5")]).then(t.bind(null,"ba8f"))},props:function(e){return{query:"merchantData"}},title:"商户数据"},{path:"transactionData",name:"commodityState",component:function(){return Promise.all([t.e("chunk-commons"),t.e("chunk-14da9915"),t.e("chunk-27ba1be5")]).then(t.bind(null,"ba8f"))},props:function(e){return{query:"transactionData"}},title:"交易数据"},{path:"platformGame",name:"commodityState",component:function(){return Promise.all([t.e("chunk-commons"),t.e("chunk-14da9915"),t.e("chunk-27ba1be5")]).then(t.bind(null,"ba8f"))},props:function(e){return{query:"platformGame"}},title:"平台游戏"}]},{path:"/platform/",component:function(){return Promise.resolve().then(t.bind(null,"c1f7"))},icon:"pingtai",title:"平台管理",children:[{path:"platformGame",name:"platformGame",component:function(){return t.e("chunk-6a57a6bc").then(t.bind(null,"659e"))},title:"平台游戏"},{path:"cashManagement",name:"cashManagement",component:function(){return Promise.all([t.e("chunk-commons"),t.e("chunk-3767c6d4")]).then(t.bind(null,"8785"))},title:"提现管理"},{path:"advertisement",name:"advertisement",component:function(){return t.e("chunk-82cfc990").then(t.bind(null,"3667"))},title:"广告位配置"},{path:"signIn",name:"signIn",component:function(){return Promise.all([t.e("chunk-commons"),t.e("chunk-0b3e0f0f")]).then(t.bind(null,"fded"))},title:"签到配置"},{path:"awardRules",name:"awardRules",component:function(){return t.e("chunk-2d0aaf78").then(t.bind(null,"12ef"))},title:"奖励规则"},{path:"addressLibrary",name:"addressLibrary",component:function(){return Promise.all([t.e("chunk-commons"),t.e("chunk-47d8d5b1")]).then(t.bind(null,"65c0"))},title:"地址库"}]},{path:"/system/",component:function(){return Promise.resolve().then(t.bind(null,"c1f7"))},icon:"xitong",title:"系统管理",children:[{path:"accountManagement",name:"accountManagement",component:function(){return t.e("chunk-687022ba").then(t.bind(null,"7c4d0"))},title:"账号管理"},{path:"roleManagement",name:"roleManagement",component:function(){return t.e("chunk-9c9cb1f6").then(t.bind(null,"6e40"))},title:"角色管理"}]}],defaultProps:{children:"children",label:"title"},filterText:""}},computed:{filterData:function(){for(var e=this.data2,n=[],t=0;t<e.length;t++)if(e[t].children){for(var o=[],r=0;r<e[t].children.length;r++)!0!==e[t].children[r].hidden&&!0!==e[t].children[r].notShow&&o.push(e[t].children[r]);e[t].children=o,n.push(e[t])}else!0!==e[t].hidden&&!0!==e[t].notShow&&n.push(e[t]);return n}},watch:{filterText:function(e){this.$refs.tree1.filter(e)}},mounted:function(){this.$refs.tree1.filter(!0)},created:function(){var e=this;console.log(this.$route.query.id);var n=this.$route.query.id;n?Object(a["g"])(n).then((function(n){console.log(n.data);var t=n.data,o=[];n.data.resources.forEach((function(e){o.push(e.name)})),t.resources=o,e.$refs.tree1.setCheckedKeys(o),console.log(t),e.formData=t})):document.title="添加角色"},methods:{init:function(){console.log("加载默认数据");var e={};this.$webApi.parent("API",e).then((function(e){console.log(e)}))},onSubmit:function(e){var n=this;this.$refs[e].validate((function(e){if(e){console.log("提交表单:"),console.log(n.formData);var t={name:n.formData.name,resource_names:JSON.stringify(n.formData.resources)},o=n.$qs.stringify(t),r=n.$route.query.id;console.log(t),r?Object(a["i"])(r,t).then((function(e){console.log(e),n.$message({type:"success",message:"编辑成功!"})})):Object(a["d"])(o).then((function(e){console.log(e),n.$message({type:"success",message:"创建成功!"})}))}}))},getSelectedMenu:function(){var e=this.$refs.tree1.getCheckedNodes(!1,!0);console.log(e);var n=[];e.forEach((function(e){n.push(e.title)})),this.$set(this.formData,"resources",n),console.log(n)},DisplayNote:function(e,n,t){return!0!==n.hidden&&!0!==n.notShow},resetForm:function(e,n){console.log("重置表单:"),this[n]=!1,this.$refs.tree1.setCheckedNodes([]),this.$refs[e].resetFields(),this.$router.push("/system/roleManagement")}}},c=l,s=t("2877"),u=Object(s["a"])(c,o,r,!1,null,"f988cf0e",null);n["default"]=u.exports}}]);