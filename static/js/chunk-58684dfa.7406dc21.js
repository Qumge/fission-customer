(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58684dfa"],{"09f4":function(t,e,o){"use strict";o.d(e,"a",(function(){return n})),Math.easeInOutQuad=function(t,e,o,a){return t/=a/2,t<1?o/2*t*t+e:(t--,-o/2*(t*(t-2)-1)+e)};var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function s(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function i(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function n(t,e,o){var n=i(),l=t-n,r=20,c=0;e="undefined"===typeof e?500:e;var d=function t(){c+=r;var i=Math.easeInOutQuad(c,n,l,e);s(i),c<e?a(t):o&&"function"===typeof o&&o()};d()}},"10ccf":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("TopTitle",{attrs:{title:t.title}}),t._v(" "),o("div",{staticClass:"displayContent"},[o("el-form",{ref:"formNode",staticClass:"form-item",attrs:{model:t.formData,rules:t.formRules,"label-width":"180px"}},[o("el-form-item",{attrs:{label:"任务类型",prop:"goodsClassifyTwo"}},[o("el-select",{staticClass:"statusBarBtn",attrs:{size:"small",placeholder:"请选择"},on:{change:t.changeType},model:{value:t.formData.goodsClassifyTwo,callback:function(e){t.$set(t.formData,"goodsClassifyTwo",e)},expression:"formData.goodsClassifyTwo"}},t._l(t.statesList,(function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),o("el-form-item",{attrs:{label:"选择任务",prop:"brandName"}},[o("el-button",{attrs:{type:"text",icon:"el-icon-plus"},on:{click:t.triggerDialog}},[t._v("从任务库中选择")])],1),t._v(" "),o("el-form-item",{attrs:{label:"banner图片",prop:"goodsImageUrlList"}},[t.disabled?o("div",[o("img",{staticClass:"goodsPhone",attrs:{src:t.$commonImg}})]):o("el-upload",{attrs:{"before-upload":t.beforeAvatarUpload,"on-remove":t.handleRemove,"on-success":t.handleAvatarSuccess,"file-list":t.formOption.goodsImageList,limit:5,"on-exceed":t.handleExceed,action:t.BASE_API+"function/file/upload/product","list-type":"picture-card"}},[o("i",{staticClass:"el-icon-plus"}),t._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("345*345 图片大小不超过60k")])])],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{size:"mini",type:"primary"},on:{clcik:function(e){return t.operationButton(1)}}},[t._v("保存")]),t._v(" "),o("el-button",{attrs:{size:"mini",type:"primary"},on:{clcik:function(e){return t.operationButton(2)}}},[t._v("取消")])],1)],1),t._v(" "),o("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[o("chooseTask",{attrs:{child:t.tableData},on:{updataId:t.changeTaskId}})],1)],1)],1)},s=[],i=(o("ac6a"),o("7b94")),n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"dialog-container"},[o("el-row",[o("div",{staticClass:"inputBox fr"},[o("el-input",{attrs:{placeholder:"搜索任务名称",size:"small"},on:{blur:t.handleFilter},model:{value:t.listQuery.condition1,callback:function(e){t.$set(t.listQuery,"condition1",e)},expression:"listQuery.condition1"}},[o("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},slot:"suffix"})])],1)]),t._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.data},on:{"sort-change":t.sortChange}},[o("el-table-column",{attrs:{prop:"data1",label:t.child.firstColumnName,"min-width":"180"}}),t._v(" "),o("el-table-column",{attrs:{prop:"data2",label:"金币数",sortable:"custom","class-name":t.getSortClass("data5"),"min-width":"100"}}),t._v(" "),o("el-table-column",{attrs:{prop:"data3",label:"领取量",sortable:"custom","class-name":t.getSortClass("data6"),"min-width":"100"}}),t._v(" "),o("el-table-column",{attrs:{prop:"data4",label:"任务时间","min-width":"180"}}),t._v(" "),o("el-table-column",{attrs:{prop:"data5",width:"230",label:"选择","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.id!=t.child.taskId?o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){return t.SingleOperation(e.row.id)}}},[t._v("选择")]):t._e(),t._v(" "),e.row.id==t.child.taskId?o("el-button",{staticStyle:{color:"#ccc"},attrs:{type:"text",size:"small"}},[t._v("已选择")]):t._e()]}}])})],1),t._v(" "),t.total?o("div",{staticClass:"pagingBox"},[o("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getList}})],1):t._e()],1)},l=[],r=(o("55dd"),o("333d")),c={components:{Pagination:r["a"]},props:{child:{type:Object,required:!0}},data:function(){return{search:"",listQuery:{page:1,limit:20,condition1:void 0,title:void 0,type:void 0,sort:"+id"},data:[{data1:"data1",data2:"data2",data3:"data3",data4:"data4",data5:"data5",data6:"data6",data7:"data7",id:12}],total:100,currentId:""}},watch:{child:{handler:function(t,e){console.log(t,e)},deep:!0}},created:function(){},methods:{getList:function(){console.log(this.listQuery)},SingleOperation:function(t){this.currentId=t,this.$emit("updataId",t)},handleCurrentChange:function(t){console.log(t)},sortChange:function(t){console.log(t);var e=t.prop,o=t.order;e&&this.sortByID(o,e)},sortByID:function(t,e){this.listQuery.sort="ascending"===t?"+".concat(e):"-".concat(e),this.handleFilter()},handleFilter:function(){this.listQuery.page=1,this.getList()},getSortClass:function(t){var e=this.listQuery.sort;return e==="+".concat(t)?"ascending":e==="-".concat(t)?"descending":""}}},d=c,u=(o("88d4"),o("2877")),f=Object(u["a"])(d,n,l,!1,null,"60e15056",null),m=f.exports,p={components:{TopTitle:i["a"],chooseTask:m},data:function(){return{BASE_API:Object({NODE_ENV:"production",VUE_APP_BASE_API:"https://api.shjietui.com",BASE_URL:"/"}).BASE_API,dialogTableVisible:!1,formData:{goodsClassifyTwo:"",brandName:"",goodsImageUrlList:""},statesList:[{value:"0",label:"商品任务"},{value:"1",label:"游戏任务"},{value:"2",label:"调查任务"},{value:"3",label:"阅读任务"}],tableData:{type:"",firstColumnName:"",taskId:""},formOption:{goodsImageList:[]},formRules:{aaa:[{required:!0,message:"zzz不能为空",trigger:"change"}]},title:"添加/编辑任务广告",disabled:!1,dialogTitle:""}},created:function(){console.log("当前组件渲染完成:")},methods:{init:function(){console.log("加载默认数据");var t={};this.$webApi.parent("API",t).then((function(t){console.log(t)}))},onSubmit:function(t){var e=this;this.$refs[t].validate((function(o){if(o){console.log("提交表单:"),console.log(e.formData);var a={goodsClassifyTwo:e.formData.goodsClassifyTwo,brandName:e.formData.brandName,goodsImageUrlList:e.formData.goodsImageUrlList};a.specificationsList.forEach((function(t){""===t.pricingRmb&&t.pricingRmb}));var s={platformId:e.$route.params.qid};e.$webApi.product("update",a,s).then((function(o){console.log(o),e.$store.dispatch("setLoadingStatus",!1),e.$refs[t].resetFields(),e.$message({type:"success",message:"编辑成功!"}),e.reload()})).catch((function(){e.$store.dispatch("setLoadingStatus",!1)}))}}))},resetForm:function(t,e){console.log("重置表单:"),this[e]=!1,this.$refs[t].resetFields()},handleAvatarSuccessSpecifications:function(t,e,o,a){console.log("文件上传成功:"),console.log(t),console.log(e),console.log(o),console.log(a),"000"===t.code?this.$set(this.formData.specificationsList[a],"thumbnailUrl",t.data):this.$message.error(t.message)},beforeAvatarUploadSpecifications:function(t){console.log("上传文件之前:");var e="image/jpeg"===t.type||"image/png"===t.type;return e||this.$message.error("上传图片只能是 JPG/PNG 格式!"),e},queryClassifyListByParentId:function(t,e,o){var a=this,s={parentId:t},i={platformId:this.$route.params.qid};this.$webApi.public("queryClassifyListByParentId",s,i).then((function(t){console.log("商品分类列表查询-"+e+"级："),console.log(t),1===e?(a.formData.goodsClassifyOne="",a.formData.goodsClassifyTwo="",a.formData.classifyId="",a.formOption.goodsClassifyOneSelectList=t.data&&t.data.length>0?t.data:[],a.formData.goodsClassifyOne=o||""):2===e?(a.formData.goodsClassifyTwo="",a.formData.classifyId="",a.formOption.goodsClassifyTwoSelectList=t.data&&t.data.length>0?t.data:[],a.formData.goodsClassifyTwo=o||""):3===e&&(a.formData.classifyId="",a.formOption.classifySelectList=t.data&&t.data.length>0?t.data:[],a.formData.classifyId=o||"")}))},setDefaultDisplay:function(t){var e=this;this.formData.specificationsList.forEach((function(o,a){e.formData.specificationsList[a].defaultSpecification=t===a?1:0,console.log(e.formData.specificationsList)}))},beforeAvatarUpload:function(t){var e=this;console.log("上传文件之前:");var o="image/jpeg"===t.type||"image/png"===t.type,a=t.size/1024<60;o||this.$message.error("上传图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传图片大小不能超过 60KB!");var s=new Promise((function(e,o){var a=345,s=345,i=window.URL||window.webkitURL,n=new Image;n.onload=function(){var t=n.width===a&&n.height===s;console.log("valid:"),console.log(t),t?e():o()},n.src=i.createObjectURL(t),console.log("img.src:"),console.log(n.src)})).then((function(){return t}),(function(){return e.$message.error("上传的图片大小必须是345*345!"),Promise.reject()}));return o&&a&&s},handleAvatarSuccess:function(t,e,o){console.log("文件上传成功:"),console.log(t),console.log(e),console.log(o),"000"===t.code?(this.formOption.goodsImageUrlList=o,this.formOption.hasModifyGoodsImage=!0):this.$message.error(t.message)},handleRemove:function(t,e){console.log("文件列表移除文件:"),console.log(t,e),this.formOption.goodsImageUrlList=e,this.formOption.hasModifyGoodsImage=!0},handleExceed:function(t,e){console.log("文件超出个数限:"),this.$message.warning("当前限制选择 5 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},operationButton:function(t){},changeType:function(t){console.log(t),this.tableData.type=t,this.dialogTitle="选择".concat(this.statesList[t].label),this.tableData.firstColumnName=this.statesList[t].label},triggerDialog:function(){this.tableData.type?this.dialogTableVisible=!0:this.$message.error("请先选择任务类型")},changeTaskId:function(t){console.log(t),this.tableData.taskId=t}}},g=p,h=Object(u["a"])(g,a,s,!1,null,null,null);e["default"]=h.exports},"2f21":function(t,e,o){"use strict";var a=o("79e5");t.exports=function(t,e){return!!t&&a((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},4205:function(t,e,o){},"4f20":function(t,e,o){},"55dd":function(t,e,o){"use strict";var a=o("5ca1"),s=o("d8e8"),i=o("4bf8"),n=o("79e5"),l=[].sort,r=[1,2,3];a(a.P+a.F*(n((function(){r.sort(void 0)}))||!n((function(){r.sort(null)}))||!o("2f21")(l)),"Array",{sort:function(t){return void 0===t?l.call(i(this)):l.call(i(this),s(t))}})},"7b94":function(t,e,o){"use strict";var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"topTitle"},[o("span"),o("span",{staticClass:"title"},[t._v(t._s(t.title))])])},s=[],i={props:{title:{type:String,required:!0}},data:function(){return{}}},n=i,l=(o("d98e"),o("2877")),r=Object(l["a"])(n,a,s,!1,null,"24a0e96e",null);e["a"]=r.exports},"88d4":function(t,e,o){"use strict";var a=o("4f20"),s=o.n(a);s.a},d98e:function(t,e,o){"use strict";var a=o("4205"),s=o.n(a);s.a}}]);