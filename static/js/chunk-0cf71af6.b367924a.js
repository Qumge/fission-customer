(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cf71af6"],{"11c8":function(t,n,e){"use strict";e.d(n,"b",(function(){return c})),e.d(n,"g",(function(){return r})),e.d(n,"i",(function(){return a})),e.d(n,"c",(function(){return i})),e.d(n,"k",(function(){return s})),e.d(n,"a",(function(){return u})),e.d(n,"h",(function(){return l})),e.d(n,"j",(function(){return d})),e.d(n,"m",(function(){return p})),e.d(n,"d",(function(){return f})),e.d(n,"e",(function(){return h})),e.d(n,"f",(function(){return g})),e.d(n,"l",(function(){return m}));var o=e("b775");function c(t){return o["a"].get("categories",{params:t})}function r(t){return o["a"].post("categories",t)}function a(t){return o["a"].delete("categories/".concat(t))}function i(t,n){return o["a"].patch("categories/".concat(t),n)}function s(t){return o["a"].get("products",{params:t})}function u(t){return o["a"].post("products/destroy",t)}function l(t){return o["a"].post("products",t)}function d(t){return o["a"].delete("products/".concat(t))}function p(t){return o["a"].get("products/".concat(t))}function f(t,n){return o["a"].patch("products/".concat(t),n)}function h(t){return o["a"].post("products/audit",t)}function g(t){return o["a"].post("products/change_status",t)}function m(){return o["a"].get("qiniu/token")}},1558:function(t,n,e){"use strict";var o=e("e574"),c=e.n(o);c.a},ba61:function(t,n,e){"use strict";e.r(n);var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"app-container"},[e("el-button",{staticClass:"add-btn",attrs:{size:"small",icon:"el-icon-circle-plus",type:"primary"},on:{click:t.addParentNode}},[t._v("新增分类")]),t._v(" "),e("el-tree",{attrs:{data:t.prdocutData,"expand-on-click-node":!1,props:t.defaultProps,"node-key":"id","default-expand-all":""},scopedSlots:t._u([{key:"default",fn:function(n){var o=n.node,c=n.data;return e("span",{staticClass:"custom-tree-node"},[e("span",[t._v(t._s(o.label))]),t._v(" "),e("span",[o.level<3?e("el-button",{attrs:{type:"text",icon:"el-icon-plus",size:"mini"},on:{click:function(){return t.append(o,c)}}},[t._v("\n          新增二级分类\n        ")]):t._e(),t._v(" "),e("el-button",{attrs:{type:"text",icon:"el-icon-edit",size:"mini"},on:{click:function(){return t.update(o,c)}}},[t._v("\n          编辑\n        ")]),t._v(" "),e("el-button",{attrs:{type:"text",icon:"el-icon-delete",size:"mini"},on:{click:function(){return t.remove(o,c)}}},[t._v("\n          删除\n        ")])],1)])}}])})],1)},c=[],r=(e("20d6"),e("11c8")),a={data:function(){return{prdocutData:[{id:"19",parentId:"0",text:"第一个商品",children:[{id:"21",parentId:"19",text:"213",children:[],hasParent:!0,hasChildren:!1,attributes:null,checked:!1,state:null},{id:"23",parentId:"19",text:"65757",children:[{id:"24",parentId:"23",text:"67567",children:[],hasParent:!0,hasChildren:!1,attributes:null,checked:!1,state:null}],hasParent:!0,hasChildren:!0,attributes:null,checked:!1,state:null},{id:"27",parentId:"19",text:"暗示法萨芬",children:[],hasParent:!0,hasChildren:!1,attributes:null,checked:!1,state:null}],hasParent:!1,hasChildren:!0,attributes:null,checked:!1,state:null},{id:"25",parentId:"0",text:"第二个商品",children:[],hasParent:!1,hasChildren:!1,attributes:null,checked:!1,state:null},{id:"26",parentId:"0",text:"嘎嘎",children:[],hasParent:!1,hasChildren:!1,attributes:null,checked:!1,state:null}],defaultProps:{children:"children",label:"name"}}},created:function(){console.log("初始化："),this.init()},methods:{init:function(){var t=this;Object(r["b"])().then((function(n){console.log("加载默认数据："),console.log(n.data),t.prdocutData=n.data}))},addParentNode:function(t){var n=this;console.log("添加父节点:"),this.$prompt("","请输入商品类别名",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\S+/,inputErrorMessage:"商品类别名称不能为空"}).then((function(t){var e=t.value,o={name:e},c=n.$qs.stringify(o);Object(r["g"])(c).then((function(t){console.log(t),n.init(),n.$message({type:"success",message:"新增成功!"})}))}))},append:function(t,n){var e=this;console.log("新增节点："),console.log(t),3===n.level?this.$message({type:"success",message:"商品类别目录深度最多为3级!"}):this.$prompt("","请输入商品类别名",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\S+/,inputErrorMessage:"商品类别名称不能为空"}).then((function(t){var o=t.value,c={name:o,root_id:n.id},a=e.$qs.stringify(c);Object(r["g"])(a).then((function(t){console.log(t),e.init(),e.$message({type:"success",message:"新增成功!"})}))}))},update:function(t,n){var e=this;console.log("更新："),this.$prompt("","请输入新的商品类别名",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\S+/,inputErrorMessage:"商品类别名称不能为空"}).then((function(t){var o=t.value,c={name:o,root_id:n.parent?n.parent.id:""};console.log(c);var a=e.$qs.stringify(c);Object(r["c"])(n.id,a).then((function(t){console.log(t),e.init(),e.$message({type:"success",message:"修改成功!"})}))}))},remove:function(t,n){var e=this;console.log(t),console.log(n),t.childNodes&&t.childNodes.length>0?this.$message({type:"error",message:"当前目录下还有子分类，请先删除子分类再进行此操作!"}):this.$confirm("此操作将永久删除该商品类别, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(o,c,a){"confirm"===o?(console.log("删除商品类别："),Object(r["i"])(n.id).then((function(o){console.log(o);var c=t.parent,r=c.childNodes||c.data;console.log(r);var i=r.findIndex((function(t){return t.data.id===n.id}));console.log(i),r.splice(i,1),e.$message({type:"success",message:"删除成功!"}),a()})).catch((function(){a()}))):a()}})}}},i=a,s=(e("e479"),e("1558"),e("2877")),u=Object(s["a"])(i,o,c,!1,null,null,null);n["default"]=u.exports},e479:function(t,n,e){"use strict";var o=e("e545"),c=e.n(o);c.a},e545:function(t,n,e){},e574:function(t,n,e){}}]);